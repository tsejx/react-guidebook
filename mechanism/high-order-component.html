<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é«˜é˜¶ç»„ä»¶ | React-Guidebook</title>
    <meta name="description" content="">
    <link rel="icon" href="favicon.ico">
    
    <link rel="preload" href="/react-guidebook/assets/css/0.styles.e28a9572.css" as="style"><link rel="preload" href="/react-guidebook/assets/js/app.260c1e95.js" as="script"><link rel="preload" href="/react-guidebook/assets/js/2.faf5b053.js" as="script"><link rel="preload" href="/react-guidebook/assets/js/41.d5b5333a.js" as="script"><link rel="prefetch" href="/react-guidebook/assets/js/10.12b8a1f6.js"><link rel="prefetch" href="/react-guidebook/assets/js/11.08027518.js"><link rel="prefetch" href="/react-guidebook/assets/js/12.96017118.js"><link rel="prefetch" href="/react-guidebook/assets/js/13.843c2301.js"><link rel="prefetch" href="/react-guidebook/assets/js/14.350d4ea6.js"><link rel="prefetch" href="/react-guidebook/assets/js/15.922c628d.js"><link rel="prefetch" href="/react-guidebook/assets/js/16.179de27c.js"><link rel="prefetch" href="/react-guidebook/assets/js/17.d6f21d06.js"><link rel="prefetch" href="/react-guidebook/assets/js/18.3b94c7d4.js"><link rel="prefetch" href="/react-guidebook/assets/js/19.9d272f30.js"><link rel="prefetch" href="/react-guidebook/assets/js/20.5719f794.js"><link rel="prefetch" href="/react-guidebook/assets/js/21.32a481df.js"><link rel="prefetch" href="/react-guidebook/assets/js/22.a8130aca.js"><link rel="prefetch" href="/react-guidebook/assets/js/23.04c27a3a.js"><link rel="prefetch" href="/react-guidebook/assets/js/24.bc3baace.js"><link rel="prefetch" href="/react-guidebook/assets/js/25.e2bf72b2.js"><link rel="prefetch" href="/react-guidebook/assets/js/26.e2f5f647.js"><link rel="prefetch" href="/react-guidebook/assets/js/27.12c8dd66.js"><link rel="prefetch" href="/react-guidebook/assets/js/28.786c50e6.js"><link rel="prefetch" href="/react-guidebook/assets/js/29.bdb196e1.js"><link rel="prefetch" href="/react-guidebook/assets/js/3.28696f6a.js"><link rel="prefetch" href="/react-guidebook/assets/js/30.cf0e07b4.js"><link rel="prefetch" href="/react-guidebook/assets/js/31.6dad3ae2.js"><link rel="prefetch" href="/react-guidebook/assets/js/32.bd3b8924.js"><link rel="prefetch" href="/react-guidebook/assets/js/33.c7028e61.js"><link rel="prefetch" href="/react-guidebook/assets/js/34.980dc58f.js"><link rel="prefetch" href="/react-guidebook/assets/js/35.b7595861.js"><link rel="prefetch" href="/react-guidebook/assets/js/36.5096dad5.js"><link rel="prefetch" href="/react-guidebook/assets/js/37.95547070.js"><link rel="prefetch" href="/react-guidebook/assets/js/38.158db71c.js"><link rel="prefetch" href="/react-guidebook/assets/js/39.533eee82.js"><link rel="prefetch" href="/react-guidebook/assets/js/4.63e5ba6d.js"><link rel="prefetch" href="/react-guidebook/assets/js/40.58cb3743.js"><link rel="prefetch" href="/react-guidebook/assets/js/42.8fd16888.js"><link rel="prefetch" href="/react-guidebook/assets/js/43.17e7ea62.js"><link rel="prefetch" href="/react-guidebook/assets/js/44.c75d55fd.js"><link rel="prefetch" href="/react-guidebook/assets/js/45.cfb8cfbd.js"><link rel="prefetch" href="/react-guidebook/assets/js/46.21fefad7.js"><link rel="prefetch" href="/react-guidebook/assets/js/47.65560a73.js"><link rel="prefetch" href="/react-guidebook/assets/js/48.b09b6aff.js"><link rel="prefetch" href="/react-guidebook/assets/js/49.17f999ca.js"><link rel="prefetch" href="/react-guidebook/assets/js/5.dd0f972b.js"><link rel="prefetch" href="/react-guidebook/assets/js/50.3c7b255a.js"><link rel="prefetch" href="/react-guidebook/assets/js/51.f1ffef2a.js"><link rel="prefetch" href="/react-guidebook/assets/js/52.8414d27e.js"><link rel="prefetch" href="/react-guidebook/assets/js/53.ee10be58.js"><link rel="prefetch" href="/react-guidebook/assets/js/54.790296ee.js"><link rel="prefetch" href="/react-guidebook/assets/js/55.b3491420.js"><link rel="prefetch" href="/react-guidebook/assets/js/56.ded674be.js"><link rel="prefetch" href="/react-guidebook/assets/js/57.f989e8b0.js"><link rel="prefetch" href="/react-guidebook/assets/js/58.2cc1c592.js"><link rel="prefetch" href="/react-guidebook/assets/js/6.38cc656d.js"><link rel="prefetch" href="/react-guidebook/assets/js/7.86641c97.js"><link rel="prefetch" href="/react-guidebook/assets/js/8.8391da58.js"><link rel="prefetch" href="/react-guidebook/assets/js/9.a3a45a50.js">
    <link rel="stylesheet" href="/react-guidebook/assets/css/0.styles.e28a9572.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-guidebook/" class="home-link router-link-active"><img src="/react-guidebook/favicon.png" alt="React-Guidebook" class="logo"> <span class="site-name can-hide">React-Guidebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/tsejx/React-Guidebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/tsejx/React-Guidebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>åŸºæœ¬æ¦‚å¿µ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/concept/react.html" class="sidebar-link">React ç‰¹æ€§</a></li><li><a href="/react-guidebook/concept/jsx.html" class="sidebar-link">JSX è¯­æ³•</a></li><li><a href="/react-guidebook/concept/props.html" class="sidebar-link">Props</a></li><li><a href="/react-guidebook/concept/state.html" class="sidebar-link">State</a></li><li><a href="/react-guidebook/concept/lifecycle.html" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/react-guidebook/concept/component.html" class="sidebar-link">ç»„ä»¶åŒ–</a></li><li><a href="/react-guidebook/concept/react-dom.html" class="sidebar-link">ReactDOM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ ¸å¿ƒæ¶æ„</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/core/fiber.html" class="sidebar-link">Fiber</a></li><li><a href="/react-guidebook/core/virtual-dom.html" class="sidebar-link">Virtual DOM</a></li><li><a href="/react-guidebook/core/diffing-algorithm.html" class="sidebar-link">å·®å¼‚åŒ–ç®—æ³•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>è¿è¡Œæœºåˆ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/mechanism/set-state.html" class="sidebar-link">setState</a></li><li><a href="/react-guidebook/mechanism/render.html" class="sidebar-link">æ¸²æŸ“ç­–ç•¥</a></li><li><a href="/react-guidebook/mechanism/refs.html" class="sidebar-link">Refs</a></li><li><a href="/react-guidebook/mechanism/portals.html" class="sidebar-link">Portals</a></li><li><a href="/react-guidebook/mechanism/context.html" class="sidebar-link">Context</a></li><li><a href="/react-guidebook/mechanism/render-props.html" class="sidebar-link">Render Props</a></li><li><a href="/react-guidebook/mechanism/high-order-component.html" class="active sidebar-link">é«˜é˜¶ç»„ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/react-guidebook/mechanism/handling-events.html" class="sidebar-link">äº‹ä»¶å¤„ç†</a></li><li><a href="/react-guidebook/mechanism/synthetic-event.html" class="sidebar-link">åˆæˆäº‹ä»¶</a></li><li><a href="/react-guidebook/mechanism/hooks.html" class="sidebar-link">Hooks</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>åŠŸèƒ½æ‰©å±•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/feature/memo.html" class="sidebar-link">React.memo</a></li><li><a href="/react-guidebook/feature/pure-component.html" class="sidebar-link">React.PureComponent</a></li><li><a href="/react-guidebook/feature/fragment.html" class="sidebar-link">React.Fragment</a></li><li><a href="/react-guidebook/feature/create-ref.html" class="sidebar-link">React.createRef</a></li><li><a href="/react-guidebook/feature/forward-ref.html" class="sidebar-link">React.forwardRef</a></li><li><a href="/react-guidebook/feature/lazy.html" class="sidebar-link">React.lazy</a></li><li><a href="/react-guidebook/feature/suspense.html" class="sidebar-link">React.Suspense</a></li><li><a href="/react-guidebook/feature/clone-element.html" class="sidebar-link">React.cloneElement</a></li><li><a href="/react-guidebook/feature/is-valid-element.html" class="sidebar-link">React.isValidElement</a></li><li><a href="/react-guidebook/feature/children.html" class="sidebar-link">React.Children</a></li><li><a href="/react-guidebook/feature/force-update.html" class="sidebar-link">forceUpdate</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç”Ÿæ€</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>è·¯ç”±ç®¡ç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/ecosystem/routing/spa-routing.html" class="sidebar-link">å•é¡µé¢åº”ç”¨è·¯ç”±æœºåˆ¶</a></li><li><a href="/react-guidebook/ecosystem/routing/react-router.html" class="sidebar-link">React Router</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>æ•°æ®ç®¡ç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/ecosystem/redux/flux.html" class="sidebar-link">Flux</a></li><li><a href="/react-guidebook/ecosystem/redux/redux.html" class="sidebar-link">Redux</a></li><li><a href="/react-guidebook/ecosystem/redux/react-redux.html" class="sidebar-link">React Redux</a></li><li><a href="/react-guidebook/ecosystem/redux/redux-saga.html" class="sidebar-link">Redux Saga</a></li><li><a href="/react-guidebook/ecosystem/redux/redux-thunk.html" class="sidebar-link">Redux Thunk</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ç±»å‹æ£€æµ‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-guidebook/ecosystem/type/prop-types.html" class="sidebar-link">PropTypes</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" aria-hidden="true" class="header-anchor">#</a> é«˜é˜¶ç»„ä»¶</h1> <p>é«˜é˜¶ç»„ä»¶ï¼ˆHigh-Order Componentï¼‰æ¥å— React ç»„ä»¶ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ªæ–°çš„ React ç»„ä»¶ã€‚</p> <ul><li>é«˜é˜¶ç»„ä»¶ä¸æ˜¯ç»„ä»¶ï¼Œæ˜¯å¢å¼ºå‡½æ•°ï¼Œå¯ä»¥è¾“å…¥ä¸€ä¸ªå…ƒç»„ä»¶ï¼Œè¾“å‡ºä¸€ä¸ªæ–°çš„å¢å¼ºç»„ä»¶</li> <li>é«˜é˜¶ç»„ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯ä»£ç å¤ç”¨ï¼Œæ“ä½œçŠ¶æ€å’Œå‚æ•°</li></ul> <p><strong>å®ç°é«˜é˜¶ç»„ä»¶çš„æ–¹æ³•ï¼š</strong></p> <ul><li><strong>å±æ€§ä»£ç†ï¼ˆprops proxyï¼‰</strong>ã€‚é«˜é˜¶ç»„ä»¶é€šè¿‡è¢«åŒ…è£¹çš„ React ç»„ä»¶æ¥æ“ä½œ Propsã€‚</li> <li><strong>åå‘ç»§æ‰¿ï¼ˆinheritance inversionï¼‰</strong>ã€‚é«˜é˜¶ç»„ä»¶ç»§æ‰¿äºè¢«åŒ…è£¹çš„ React ç»„ä»¶ã€‚</li></ul> <h3 id="å±æ€§ä»£ç†"><a href="#å±æ€§ä»£ç†" aria-hidden="true" class="header-anchor">#</a> å±æ€§ä»£ç†</h3> <p><strong>å±æ€§ä»£ç†ï¼ˆProps Proxyï¼‰</strong>ï¼šè¾“å‡ºä¸€ä¸ªç»„ä»¶ï¼Œå®ƒåŸºäºè¢«åŒ…è£¹ç»„ä»¶è¿›è¡Œ<strong>åŠŸèƒ½å¢å¼º</strong>ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrapperdComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œçš„é«˜é˜¶ç»„ä»¶ä¸­é‡‡ç”¨äº†åŒ¿åç±»é€šè¿‡ render æ–¹æ³•è¿”å›ä¼ å…¥çš„ React ç»„ä»¶ï¼ˆWrappedComponentï¼‰ã€‚é€šè¿‡é«˜é˜¶ç»„ä»¶ä¼ é€’ Propsï¼Œè¿™ç§æ–¹å¼å³ä¸ºå±æ€§ä»£ç†ã€‚</p> <p>è¿™æ ·ç»„ä»¶å°±å¯ä»¥ä¸€å±‚å±‚åœ°ä½œä¸ºå‚æ•°è¢«è°ƒç”¨ï¼ŒåŸå§‹ç»„ä»¶å°±å…·å¤‡äº†é«˜é˜¶ç»„ä»¶å¯¹å®ƒçš„ä¿®é¥°ã€‚å°±è¿™ä¹ˆç®€å•ï¼Œä¿æŒå•ä¸ªç»„ä»¶å°è£…æ€§çš„åŒæ—¶è¿˜ä¿ç•™äº†æ˜“ç”¨æ€§ã€‚</p> <h4 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" aria-hidden="true" class="header-anchor">#</a> é»˜è®¤å‚æ•°</h4> <p><strong>é»˜è®¤å‚æ•°</strong>ï¼šå¯ä»¥ä¸ºç»„ä»¶åŒ…è£¹ä¸€å±‚é»˜è®¤å‚æ•°ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥è¯»å–ã€å¢åŠ ã€ç¼–è¾‘æˆ–æ˜¯ç§»é™¤ä»åŸç»„ä»¶ï¼ˆWrappedComponentï¼‰ä¼ è¿›æ¥çš„ Propsï¼Œä½†éœ€è¦å°å¿ƒåˆ é™¤ä¸ç¼–è¾‘é‡è¦çš„ Propsã€‚æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å¯¹é«˜é˜¶ç»„ä»¶çš„ Props ä½œæ–°çš„å‘½åä»¥é˜²æ­¢æ··æ·†ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> nextName<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrappedComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">newProps</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å½“è°ƒç”¨é«˜é˜¶ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ–°çš„ props name äº†ã€‚å¯¹äºåŸç»„ä»¶æ¥è¯´ï¼Œåªè¦å¥—ç”¨è¿™ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬çš„æ–°ç»„ä»¶ä¸­å°±ä¼šå¤šä¸€ä¸ª name çš„ propsã€‚</p> <h4 id="é€šè¿‡-refs-ä½¿ç”¨å¼•ç”¨"><a href="#é€šè¿‡-refs-ä½¿ç”¨å¼•ç”¨" aria-hidden="true" class="header-anchor">#</a> é€šè¿‡ Refs ä½¿ç”¨å¼•ç”¨</h4> <p>åœ¨é«˜é˜¶ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¥å— Refs ä½¿ç”¨åŸç»„ä»¶ï¼ˆWrappedComponentï¼‰çš„å¼•ç”¨ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token function">proc</span><span class="token punctuation">(</span><span class="token parameter">wrappedComponentInstance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      wrappedComponentInstantce<span class="token punctuation">.</span><span class="token function">mdethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> props <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        ref<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">proc</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrappedComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å½“åŸç»„ä»¶ï¼ˆWrappedComponentï¼‰è¢«æ¸²æŸ“æ—¶ï¼ŒRefs å›è°ƒå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œï¼Œè¿™æ ·å°±ä¼šæ‹¿åˆ°ä¸€ä»½åŸç»„ä»¶ï¼ˆWrappedComponentï¼‰å®ä¾‹çš„å¼•ç”¨ã€‚è¿™å°±å¯ä»¥æ–¹ä¾¿åœ°ç”¨äºè¯»å–æˆ–å¢åŠ å®ä¾‹çš„ Propsï¼Œå¹¶è°ƒç”¨å®ä¾‹çš„æ–¹æ³•ã€‚</p> <h4 id="æŠ½è±¡çŠ¶æ€"><a href="#æŠ½è±¡çŠ¶æ€" aria-hidden="true" class="header-anchor">#</a> æŠ½è±¡çŠ¶æ€</h4> <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸç»„ä»¶ï¼ˆWrappedComponentï¼‰æä¾›çš„ Props å’Œå›è°ƒå‡½æ•°æŠ½è±¡ Stateã€‚</p> <p>é«˜é˜¶ç»„ä»¶å¯ä»¥å°†åŸç»„ä»¶æŠ½è±¡ä¸ºå±•ç¤ºå‹ç»„ä»¶ï¼Œåˆ†ç¦»å†…éƒ¨çŠ¶æ€ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedCompoenent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>onNameChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onNameChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">onNameChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          value<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
          onChange<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onNameChange<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrappedCompoennt</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">newProps</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">nameInput</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">'name'</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">MyContainer</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠ <code>input</code> ç»„ä»¶ä¸­å¯¹ name Prop çš„ onChange æ–¹æ³•æå–åˆ°é«˜é˜¶ç»„ä»¶ä¸­ï¼Œè¿™æ ·</p> <p>å°±æœ‰æ•ˆåœ°æŠ½è±¡äº†åŒæ ·çš„çŠ¶æ€æ“ä½œã€‚</p> <h4 id="åŒ…è£¹ç»„ä»¶"><a href="#åŒ…è£¹ç»„ä»¶" aria-hidden="true" class="header-anchor">#</a> åŒ…è£¹ç»„ä»¶</h4> <p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–å…ƒç´ æ¥åŒ…è£¹åŸç»„ä»¶ï¼ˆWrappedComponentï¼‰ï¼Œè¿™æ—¢å¯ä»¥æ˜¯ä¸ºäº†åŠ æ ·å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ºäº†å¸ƒå±€ã€‚</p> <p>ğŸŒ° <strong>ç¤ºä¾‹ï¼šå¢åŠ ä¸€å±‚å®šä¹‰æ ·å¼</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">WrappedCompoennt</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
     <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
         <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token punctuation">{</span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>display<span class="token punctuation">:</span> <span class="token string">'block'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrappedComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
</code></pre></div><h3 id="åå‘ç»§æ‰¿"><a href="#åå‘ç»§æ‰¿" aria-hidden="true" class="header-anchor">#</a> åå‘ç»§æ‰¿</h3> <p><strong>åå‘ç»§æ‰¿ï¼ˆInheritance Inversionï¼‰</strong>ï¼šè¾“å‡ºä¸€ä¸ªç»„ä»¶ï¼Œç»§æ‰¿äºè¢«åŒ…è£¹ç»„ä»¶ã€‚</p> <p>è¿™ç§æ–¹å¼è¿”å›çš„ React ç»„ä»¶ç»§æ‰¿äº†è¢«ä¼ å…¥çš„ç»„ä»¶ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿè®¿é—®åˆ°çš„åŒºåŸŸã€æƒé™æ›´å¤šï¼Œç›¸æ¯”å±æ€§ä»£ç†æ–¹å¼ï¼Œå®ƒæ›´åƒæ‰“å…¥ç»„ç»‡å†…éƒ¨ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p> <p>ğŸŒ° <strong>ç¤ºä¾‹ï¼š</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedCompoenent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> WrappedComponent <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æ­£å¦‚æ‰€è§ï¼Œé«˜é˜¶ç»„ä»¶è¿”å›çš„ç»„ä»¶ç»§æ‰¿äºåŸç»„ä»¶ WrappedComponentã€‚å› ä¸ºè¢«åŠ¨åœ°ç»§æ‰¿äº† WrappedComponentï¼Œæ‰€æœ‰çš„è°ƒç”¨éƒ½ä¼šåå‘ï¼Œè¿™ä¹Ÿæ˜¯è¿™ç§æ–¹æ³•çš„ç”±æ¥ã€‚</p> <p>è¿™ç§æ–¹æ³•ä¸å±æ€§ä»£ç†ä¸å¤ªä¸€æ ·ã€‚å®ƒé€šè¿‡ç»§æ‰¿ WrappedComponent æ¥å®ç°ï¼Œæ–¹æ³•å¯ä»¥é€šè¿‡ super æ¥é¡ºåºè°ƒç”¨ã€‚å› ä¸ºä¾èµ–äºç»§æ‰¿çš„æœºåˆ¶ï¼ŒHOC çš„è°ƒç”¨é¡ºåºå’Œé˜Ÿåˆ—æ˜¯ä¸€æ ·çš„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token parameter">didmount</span> <span class="token operator">=&gt;</span> <span class="token constant">HOC</span> <span class="token parameter">didmount</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">HOCs didmount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> will <span class="token parameter">unmount</span> <span class="token operator">=&gt;</span> <span class="token constant">HOC</span> will <span class="token parameter">unmount</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>HOCs will unmount<span class="token punctuation">)</span>
</code></pre></div><p>åœ¨åå‘ç»§æ‰¿æ–¹æ³•ä¸­ï¼Œé«˜é˜¶ç»„ä»¶å¯ä»¥ä½¿ç”¨åŸç»„ä»¶ WrappedComponent å¼•ç”¨ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä½¿ç”¨åŸç»„ä»¶ WrappedComponent çš„ State ã€ Props ã€ç”Ÿå‘½å‘¨æœŸå’Œ <code>render</code> æ–¹æ³•ã€‚ä½†å®ƒä¸èƒ½ä¿è¯å®Œæ•´çš„å­ç»„ä»¶æ ‘è¢«è§£æã€‚</p> <h4 id="æ¸²æŸ“åŠ«æŒ"><a href="#æ¸²æŸ“åŠ«æŒ" aria-hidden="true" class="header-anchor">#</a> æ¸²æŸ“åŠ«æŒ</h4> <p>æ¸²æŸ“åŠ«æŒæŒ‡çš„å°±æ˜¯é«˜é˜¶ç»„ä»¶å¯ä»¥æ§åˆ¶åŸç»„ä»¶ WrappedComponent çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œå¹¶æ¸²æŸ“å„ç§å„æ ·çš„ç»“æœã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åœ¨ä»»ä½• React å…ƒç´ è¾“å‡ºçš„ç»“æœä¸­è¯»å–ã€å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ Propsï¼Œæˆ–è¯»å–æˆ–ä¿®æ”¹ React å…ƒç´ æ ‘ï¼Œæˆ–æ¡ä»¶æ˜¾ç¤ºå…ƒç´ æ ‘ï¼Œåˆæˆ–æ˜¯ç”¨æ ·å¼æ§åˆ¶åŒ…è£¹å…ƒç´ æ ‘ã€‚</p> <p>æ­£å¦‚ä¹‹å‰è¯´åˆ°çš„ï¼Œåå‘ç»§æ‰¿ä¸èƒ½ä¿è¯å®Œæ•´çš„å­ç»„ä»¶æ ‘è¢«è§£æï¼Œè¿™æ„å‘³ç€å°†é™åˆ¶æ¸²æŸ“åŠ«æŒåŠŸèƒ½ã€‚ æ¸²æŸ“åŠ«æŒçš„ç»éªŒæ³•åˆ™æ˜¯æˆ‘ä»¬å¯ä»¥æ“æ§åŸç»„ä»¶ WrappedComponent çš„å…ƒç´ æ ‘ï¼Œå¹¶è¾“å‡ºæ­£ç¡®çš„ç»“æœã€‚ä½†å¦‚æœå…ƒç´ æ ‘ä¸­åŒ…æ‹¬äº†å‡½æ•°ç±»å‹çš„ React ç»„ä»¶ï¼Œå°±ä¸èƒ½æ“ä½œç»„ä»¶çš„å­ç»„ä»¶ã€‚</p> <h5 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" aria-hidden="true" class="header-anchor">#</a> æ¡ä»¶æ¸²æŸ“</h5> <p><strong>æ¡ä»¶æ¸²æŸ“</strong>ï¼šæ ¹æ®æ¡ä»¶ï¼Œæ¸²æŸ“ä¸åŒçš„ç»„ä»¶ã€‚</p> <p>ğŸŒ° <strong>ç¤ºä¾‹ï¼šæ¡ä»¶æ¸²æŸ“</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> WrappedComponent <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>loggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="ä¿®æ”¹æ¸²æŸ“"><a href="#ä¿®æ”¹æ¸²æŸ“" aria-hidden="true" class="header-anchor">#</a> ä¿®æ”¹æ¸²æŸ“</h5> <p><strong>ä¿®æ”¹æ¸²æŸ“</strong>ï¼šå¯ä»¥ç›´æ¥ä¿®æ”¹è¢«åŒ…è£¹ç»„ä»¶æ¸²æŸ“å‡ºçš„ React å…ƒç´ æ ‘ã€‚</p> <p>ğŸŒ° <strong>ç¤ºä¾‹ï¼šä¿®æ”¹æ¸²æŸ“</strong></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> WrappedComponent <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> elementsTree <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>elementsTree <span class="token operator">&amp;&amp;</span> elementsTree<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'input'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        newProps <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">'may the force be with you'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> props <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> elementsTree<span class="token punctuation">.</span>props<span class="token punctuation">,</span> newProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newElementsTree <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>elementsTree<span class="token punctuation">,</span> props<span class="token punctuation">,</span> elementsTree<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> newElementsTree<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="æ“ä½œçŠ¶æ€"><a href="#æ“ä½œçŠ¶æ€" aria-hidden="true" class="header-anchor">#</a> æ“ä½œçŠ¶æ€</h4> <p>é«˜é˜¶ç»„ä»¶å¯ä»¥è¯»å–ã€ä¿®æ”¹æˆ–åˆ é™¤åŸç»„ä»¶ WrappedComponent å®ä¾‹ä¸­çš„ Stateï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œä¹Ÿå¯ä»¥å¢åŠ  Stateã€‚ä½†è¿™æ ·åšï¼Œå¯èƒ½ä¼šä½¿åŸç»„ä»¶ WrappedComponent å†…éƒ¨çŠ¶æ€å˜å¾—éš¾ä»¥è¿½è¸ªï¼Œä¸æ˜“ç»´æŠ¤ã€‚å¤§éƒ¨åˆ†çš„é«˜é˜¶ç»„ä»¶éƒ½åº”è¯¥é™åˆ¶è¯»å–æˆ–å¢åŠ  Stateï¼Œå°¤å…¶æ˜¯åè€…ï¼Œå¯ä»¥é€šè¿‡é‡æ–°å‘½å Stateï¼Œä»¥é˜²æ­¢æ··æ·†ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">MyContainer</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> WrappedComponent <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HOC Debugger Component</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Props</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">State</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" aria-hidden="true" class="header-anchor">#</a> åº”ç”¨åœºæ™¯</h3> <h4 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" aria-hidden="true" class="header-anchor">#</a> æƒé™æ§åˆ¶</h4> <p><strong>æƒé™æ§åˆ¶</strong>ï¼šé€šè¿‡æŠ½è±¡é€»è¾‘ï¼Œç»Ÿä¸€å¯¹é¡µé¢è¿›è¡Œæƒé™åˆ¤æ–­ï¼ŒæŒ‰ä¸åŒçš„æ¡ä»¶è¿›è¡Œé¡µé¢æ¸²æŸ“ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">auth</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
                isAdmin<span class="token punctuation">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">async</span> <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> currentRole <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCurrentUserRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                isAdmin<span class="token punctuation">:</span> currentRole <span class="token operator">===</span> <span class="token string">'Admin'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isAdmint<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WrapperdComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è¯¥é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æ€§èƒ½ç›‘æ§"><a href="#æ€§èƒ½ç›‘æ§" aria-hidden="true" class="header-anchor">#</a> æ€§èƒ½ç›‘æ§</h4> <p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šåŒ…è£¹ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿›è¡Œç»Ÿä¸€åŸ‹ç‚¹ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">performance</span> <span class="token operator">=</span> <span class="token parameter">WrappedComponent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> WrappedComponent <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">.</span>componentDidMount <span class="token operator">&amp;&amp;</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>WrappedComponent<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ç»„ä»¶æ¸²æŸ“æ—¶é—´ä¸º </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ms`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" aria-hidden="true" class="header-anchor">#</a> æ³¨æ„äº‹é¡¹</h3> <ul><li><strong>çº¯å‡½æ•°</strong>ï¼šå¢å¼ºå‡½æ•°åº”ä¸ºçº¯å‡½æ•°ï¼Œé¿å…ä¾µå…¥ä¿®æ”¹å…ƒç»„ä»¶ï¼›</li> <li><strong>é¿å…ç”¨æ³•æ±¡æŸ“</strong>ï¼šç†æƒ³çŠ¶æ€ä¸‹ï¼Œåº”é€ä¼ å…ƒç»„ä»¶çš„æ— å…³å‚æ•°ä¸äº‹ä»¶ï¼Œå°½é‡ä¿è¯ç”¨æ³•ä¸å˜ï¼›</li> <li><strong>å‘½åç©ºé—´</strong>ï¼šä¸º HOC å¢åŠ ç‰¹å¼‚çš„ç»„ä»¶åç§°ï¼Œè¿™æ ·èƒ½ä¾¿äºå¼€å‘è°ƒè¯•å’ŒæŸ¥æ‰¾é—®é¢˜ï¼›</li> <li><strong>å¼•ç”¨ä¼ é€’</strong>ï¼šå¦‚æœéœ€è¦ä¼ é€’å…ƒç»„ä»¶çš„ refs å¼•ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>React.forwardRef</code>ï¼›</li> <li><strong>é™æ€æ–¹æ³•</strong>ï¼šå…ƒç»„ä»¶ä¸Šçš„é™æ€æ–¹æ³•å¹¶æ— æ³•è¢«è‡ªåŠ¨ä¼ å‡ºï¼Œä¼šå¯¼è‡´ä¸šåŠ¡å±‚æ— æ³•è°ƒç”¨ï¼Œå› æ­¤éœ€è¦é€šè¿‡å‡½æ•°å¯¼å‡ºæˆ–è€…é™æ€æ–¹æ³•èµ‹å€¼ä¸¤ç§æ–¹æ³•è§£å†³ï¼›</li> <li><strong>é‡æ–°æ¸²æŸ“</strong>ï¼šç”±äºå¢å¼ºå‡½æ•°æ¯æ¬¡è°ƒç”¨æ˜¯è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œå› æ­¤å¦‚æœåœ¨ Render ä¸­ä½¿ç”¨å¢å¼ºå‡½æ•°ï¼Œå°±ä¼šå¯¼è‡´æ¯æ¬¡éƒ½é‡æ–°æ¸²æŸ“æ•´ä¸ª HOCï¼Œè€Œä¸”ä¹‹å‰çš„çŠ¶æ€ä¼šä¸¢å¤±ï¼›</li></ul> <hr> <p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p> <ul><li><a href="https://juejin.im/post/5c92f499f265da612647b754" target="_blank" rel="noopener noreferrer">ä¸­é«˜çº§å‰ç«¯å¤§å‚é¢è¯•ç§˜ç±<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/react-guidebook/mechanism/render-props.html" class="prev">
          Render Props
        </a></span> <span class="next"><a href="/react-guidebook/mechanism/handling-events.html">
          äº‹ä»¶å¤„ç†
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/react-guidebook/assets/js/app.260c1e95.js" defer></script><script src="/react-guidebook/assets/js/2.faf5b053.js" defer></script><script src="/react-guidebook/assets/js/41.d5b5333a.js" defer></script>
  </body>
</html>
