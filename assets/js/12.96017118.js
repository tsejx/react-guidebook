(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{191:function(t,s,a){t.exports=a.p+"assets/img/transaction-simplicity.b844fb71.jpg"},215:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"setstate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setstate","aria-hidden":"true"}},[t._v("#")]),t._v(" setState")]),t._v(" "),n("blockquote",[n("p",[n("code",[t._v("setState()")]),t._v("Â enqueues changes to the component state and tells React that this component and its children need to be re-rendered with the updated state. This is the primary method you use to update the user interface in response to event handlers and server responses.")]),t._v(" "),n("p",[n("code",[t._v("setState()")]),t._v(" å°†éœ€è¦å¤„ç†çš„å˜åŒ–å¡å…¥ï¼ˆè¯‘è€…æ³¨ï¼šsetState æºç ä¸­å°†ä¸€ä¸ªéœ€è¦æ”¹å˜çš„å˜åŒ–å­˜æ”¾åˆ°ç»„ä»¶çš„ state å¯¹è±¡ä¸­ï¼Œé‡‡ç”¨é˜Ÿåˆ—å¤„ç†ï¼‰ç»„ä»¶çš„ state å¯¹è±¡ä¸­ï¼Œ å¹¶å‘Šè¯‰è¯¥ç»„ä»¶åŠå…¶å­ç»„ä»¶éœ€è¦ç”¨æ›´æ–°çš„çŠ¶æ€æ¥é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯ç”¨äºå“åº”äº‹ä»¶å¤„ç†å’ŒæœåŠ¡ç«¯å“åº”çš„æ›´æ–°ç”¨æˆ·ç•Œé¢çš„ä¸»è¦æ–¹å¼ã€‚")])]),t._v(" "),n("p",[t._v("å®˜æ–¹æ–‡æ¡£å…³äº "),n("code",[t._v("setState")]),t._v(" çš„æè¿°éƒ¨åˆ†ï¼š"),n("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#setstate",target:"_blank",rel:"noopener noreferrer"}},[t._v("è‹±æ–‡æ–‡æ¡£"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"http://react.yubolun.com/docs/react-component.html#setstate",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸­æ–‡æ–‡æ¡£"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("ä¸ºäº†æé«˜æ¡†æ¶æ€§èƒ½ï¼ŒReact å°† "),n("code",[t._v("setState")]),t._v(" è®¾ç½®ä¸º"),n("strong",[t._v("çŠ¶æ€æ‰¹é‡å¤„ç†æˆ–æ¨è¿Ÿæ›´æ–°")]),t._v("ï¼Œå®é™…ä¸Šå°±æ˜¯"),n("strong",[t._v("å¼‚æ­¥æ“ä½œå‡½æ•°")]),t._v("ï¼Œè¯¥æ–¹æ³•ä¸ä¼šä»¥é¡ºåºæ§åˆ¶æµçš„æ–¹å¼å¤„ç†ç›¸åŒå‘¨æœŸå†…çš„äº‹ä»¶ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ä¾èµ– "),n("code",[t._v("this.state")]),t._v(" ç”¨äºè®¡ç®—æœªæ¥çŠ¶æ€ã€‚")]),t._v(" "),n("h2",{attrs:{id:"åŸºæœ¬è¯­æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬è¯­æ³•","aria-hidden":"true"}},[t._v("#")]),t._v(" åŸºæœ¬è¯­æ³•")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updater "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("table",[n("thead",[n("tr",[n("th",[t._v("å‚æ•°")]),t._v(" "),n("th",[t._v("è¯´æ˜")]),t._v(" "),n("th",[t._v("ç±»å‹")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("updater")]),t._v(" "),n("td",[t._v("æ›´æ–°å™¨")]),t._v(" "),n("td",[t._v("object | function")])]),t._v(" "),n("tr",[n("td",[t._v("callback")]),t._v(" "),n("td",[t._v("å›è°ƒå‡½æ•°")]),t._v(" "),n("td",[t._v("function")])])])]),t._v(" "),n("h3",{attrs:{id:"updater-å‚æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#updater-å‚æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" updater å‚æ•°")]),t._v(" "),n("h4",{attrs:{id:"å‡½æ•°å½¢å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‡½æ•°å½¢å¼","aria-hidden":"true"}},[t._v("#")]),t._v(" å‡½æ•°å½¢å¼")]),t._v(" "),n("p",[n("code",[t._v("updater")]),t._v(" å‚æ•°å¯ä¸ºä¸€ä¸ªå¸¦ç­¾åçš„å‡½æ•°ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" stateChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("table",[n("thead",[n("tr",[n("th",[t._v("stateChange å‚æ•°")]),t._v(" "),n("th",[t._v("è¯´æ˜")]),t._v(" "),n("th",[t._v("ç±»å‹")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("prevState")]),t._v(" "),n("td",[t._v("æœªæ›´æ–°å‰çŠ¶æ€çš„å¼•ç”¨ã€‚è¯¥å¼•ç”¨ä¸åº”è¯¥è¢«ç›´æ¥æ”¹å˜ã€‚")]),t._v(" "),n("td",[t._v("obj")])]),t._v(" "),n("tr",[n("td",[t._v("props")]),t._v(" "),n("td",[t._v("çˆ¶ç»„ä»¶ä¼ å…¥çš„å±æ€§")]),t._v(" "),n("td",[t._v("obj")])])])]),t._v(" "),n("p",[n("code",[t._v("updater")]),t._v(" å‡½æ•°æ¥æ”¶åˆ°çš„ "),n("code",[t._v("prevState")]),t._v("Â  å’Œ Â "),n("code",[t._v("props")]),t._v(" ä¿è¯éƒ½æ˜¯æœ€æ–°çš„ã€‚")]),t._v(" "),n("p",[t._v("è¯¥å‡½æ•°é€šè¿‡å¯¹ "),n("code",[t._v("prevState")]),t._v(" æˆ– "),n("code",[t._v("props")]),t._v(" çš„å¼•ç”¨æ„å»ºä¸€ä¸ªæ–°å¯¹è±¡ä½œä¸ºè¾“å‡ºï¼Œè¯¥è¾“å‡ºåç»­ç”¨äºä¸æ—§çŠ¶æ€ï¼ˆprevStateï¼‰æµ…åˆå¹¶ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("step"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"å¯¹è±¡å½¢å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡å½¢å¼","aria-hidden":"true"}},[t._v("#")]),t._v(" å¯¹è±¡å½¢å¼")]),t._v(" "),n("p",[n("code",[t._v("updater")]),t._v(" å‚æ•°äº¦å¯ä¸ºå¯¹è±¡ç±»å‹ï¼Œè¯¥å¯¹è±¡ä»…ä¼šæµ…åˆå¹¶åˆ°æ–°çŠ¶æ€ä¸­ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj stateChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("ä¸å‡½æ•°å½¢å¼ç›¸ç±»ä¼¼ï¼Œå¯¹è±¡å½¢å¼çš„ "),n("code",[t._v("updater")]),t._v(" å‚æ•°é€šè¿‡ç›´æ¥æ„å»ºä¸æ—§çŠ¶æ€æµ…åˆå¹¶çš„æ–°å¯¹è±¡ä½œä¸ºè¾“å‡ºã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"callback-å‚æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#callback-å‚æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" callback å‚æ•°")]),t._v(" "),n("p",[n("code",[t._v("callback")]),t._v(" å‚æ•°ä¸ºå¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨"),n("strong",[t._v("çŠ¶æ€æ›´æ–°å®ŒæˆåŒæ—¶ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“ä¹‹å")]),t._v("æ‰§è¡Œã€‚é€šå¸¸ï¼Œå¯¹äºæ­¤ç±»é€»è¾‘ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ "),n("code",[t._v("componentDidUpdate")]),t._v(" ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚")]),t._v(" "),n("h2",{attrs:{id:"åŸºæœ¬ç‰¹æ€§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬ç‰¹æ€§","aria-hidden":"true"}},[t._v("#")]),t._v(" åŸºæœ¬ç‰¹æ€§")]),t._v(" "),n("p",[t._v("åœ¨äº†è§£ "),n("code",[t._v("setState")]),t._v(" ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•äº†è§£ React åŒ…è£…ç»“æ„ï¼š"),n("strong",[t._v("Transaction")])]),t._v(" "),n("p",[t._v("äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯ React ä¸­çš„ä¸€ä¸ªè°ƒç”¨ç»“æ„ï¼Œç”¨äºåŒ…è£…ä¸€ä¸ªæ–¹æ³•ï¼Œç»“æ„ä¸ºï¼š"),n("code",[t._v("initialize - performance(method) - close")]),t._v("ã€‚é€šè¿‡äº‹åŠ¡ï¼Œå¯ä»¥ç»Ÿä¸€ç®¡ç†ä¸€ä¸ªæ–¹æ³•çš„å¼€å§‹ä¸ç»“æŸï¼›å¤„äºäº‹åŠ¡æµä¸­ï¼Œè¡¨ç¤ºè¿›ç¨‹æ­£åœ¨æ‰§è¡Œä¸€äº›æ“ä½œï¼›")]),t._v(" "),n("p",[n("img",{attrs:{src:a(191),alt:"transaction-simplicity"}})]),t._v(" "),n("h3",{attrs:{id:"çŠ¶æ€ä¸èƒ½ç›´æ¥ä¿®æ”¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ä¸èƒ½ç›´æ¥ä¿®æ”¹","aria-hidden":"true"}},[t._v("#")]),t._v(" çŠ¶æ€ä¸èƒ½ç›´æ¥ä¿®æ”¹")]),t._v(" "),n("p",[t._v("â“"),n("strong",[t._v("ä¸ºä»€ä¹ˆä¸åŒç›´æ¥é€šè¿‡ "),n("code",[t._v("this.state")]),t._v(" ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Ÿ")])]),t._v(" "),n("p",[t._v("åœ¨å®é™…å¼€å‘ä¸­ï¼Œç›´æ¥ä¿®æ”¹çŠ¶æ€ä¸­çš„å€¼ï¼Œè™½ç„¶äº‹å®ä¸Šæ”¹å˜äº†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½†æ˜¯å´æ²¡æœ‰é©±åŠ¨ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œæ—¢ç„¶ç»„ä»¶æ²¡æœ‰é‡æ–°æ¸²æŸ“ï¼Œç”¨æˆ·ç•Œé¢ä¸­ "),n("code",[t._v("this.state")]),t._v(" å€¼å¯¹åº”æ˜¾ç¤ºéƒ¨åˆ†ä¹Ÿå°±ä¸ä¼šæœ‰å˜åŒ–ã€‚è€Œ "),n("code",[t._v("this.setState()")]),t._v(" å‡½æ•°æ‰€å¤„ç†çš„äº‹åŠ¡ï¼Œé¦–å…ˆæ˜¯æ”¹å˜ "),n("code",[t._v("this.setState")]),t._v(" çš„å€¼ï¼Œç„¶åé©±åŠ¨ç»„ä»¶ç»å†æ›´æ–°è¿‡ç¨‹ï¼Œè¿™æ ·ç”¨æˆ·ç•Œé¢ä¸Šç›¸åº”çš„ "),n("code",[t._v("this.state")]),t._v(" å€¼æ‰æœ‰ç›¸åº”çš„å˜åŒ–ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'React'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Correct")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'React'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"å¼‚æ­¥ä¸åŒæ­¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥ä¸åŒæ­¥","aria-hidden":"true"}},[t._v("#")]),t._v(" å¼‚æ­¥ä¸åŒæ­¥")]),t._v(" "),n("p",[n("code",[t._v("setState")]),t._v(" å¹¶ä¸æ˜¯å•çº¯çš„å¼‚æ­¥æˆ–åŒæ­¥ï¼Œè¿™å…¶å®ä¸è°ƒç”¨æ—¶çš„ç¯å¢ƒç›¸å…³ã€‚")]),t._v(" "),n("h4",{attrs:{id:"åˆæˆäº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆæˆäº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" åˆæˆäº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°")]),t._v(" "),n("p",[t._v("åœ¨"),n("strong",[t._v("åˆæˆäº‹ä»¶")]),t._v("å’Œ"),n("strong",[t._v("ç”Ÿå‘½å‘¨æœŸå‡½æ•°")]),t._v("ï¼ˆé™¤ "),n("code",[t._v("componentDidUpdate")]),t._v(" ï¼‰ä¸­ï¼Œ"),n("code",[t._v("setState")]),t._v(" æ˜¯å¼‚æ­¥çš„ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("åŸå› ")]),t._v("ï¼šå› ä¸ºåœ¨ "),n("code",[t._v("setState")]),t._v(" çš„å®ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªåˆ¤æ–­ï¼šå½“æ›´æ–°ç­–ç•¥æ­£åœ¨"),n("strong",[t._v("äº‹åŠ¡æµ")]),t._v("çš„æ‰§è¡Œä¸­æ—¶ï¼Œè¯¥ç»„ä»¶æ›´æ–°ä¼šè¢«æ¨å…¥ "),n("code",[t._v("dirtyComponents")]),t._v(" é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼›å¦åˆ™ï¼Œå¼€å§‹æ‰§è¡Œ "),n("code",[t._v("batchedUpdates")]),t._v(" é˜Ÿåˆ—æ›´æ–°ã€‚")]),t._v(" "),n("ul",[n("li",[t._v("åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒç”¨ä¸­ï¼Œæ›´æ–°ç­–ç•¥éƒ½å¤„äºæ›´æ–°ä¹‹å‰ï¼Œç»„ä»¶ä»å¤„äºäº‹åŠ¡æµä¸­ï¼Œè€Œ "),n("code",[t._v("componentDidUpdate")]),t._v(" æ˜¯åœ¨æ›´æ–°ä¹‹åï¼Œæ­¤æ—¶ç»„ä»¶å·²ç»ä¸åœ¨äº‹åŠ¡æµä¸­ï¼Œå› æ­¤åˆ™ä¼šåŒæ­¥æ‰§è¡Œ")]),t._v(" "),n("li",[t._v("åœ¨åˆæˆäº‹ä»¶ä¸­ï¼ŒReact æ˜¯åŸºäºäº‹åŠ¡æµå®Œæˆçš„äº‹ä»¶å§”æ‰˜æœºåˆ¶å®ç°ï¼Œä¹Ÿæ˜¯å¤„äºäº‹åŠ¡æµä¸­ï¼›")])]),t._v(" "),n("p",[n("strong",[t._v("é—®é¢˜")]),t._v("ï¼šæ— æ³•åœ¨ "),n("code",[t._v("setState")]),t._v(" åé©¬ä¸Šä» "),n("code",[t._v("this.state")]),t._v(" ä¸Šè·å–æ›´æ–°åçš„å€¼ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("è§£å†³")]),t._v("ï¼šå¦‚æœéœ€è¦é©¬ä¸ŠåŒæ­¥å¹¶è·å–æœ€æ–°å€¼ï¼Œå¯é€šè¿‡ "),n("code",[t._v("setState((prevState, props) => {}, callback)")]),t._v(" è·å–æœ€æ–°çš„çŠ¶æ€ã€‚")]),t._v(" "),n("h4",{attrs:{id:"åŸç”Ÿäº‹ä»¶å’Œå®šæ—¶å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŸç”Ÿäº‹ä»¶å’Œå®šæ—¶å™¨","aria-hidden":"true"}},[t._v("#")]),t._v(" åŸç”Ÿäº‹ä»¶å’Œå®šæ—¶å™¨")]),t._v(" "),n("p",[t._v("åœ¨"),n("strong",[t._v("åŸç”Ÿäº‹ä»¶")]),t._v("å’Œ "),n("strong",[t._v("setTimeout")]),t._v(" ä¸­ï¼Œ"),n("code",[t._v("setState")]),t._v(" æ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥é©¬ä¸Šè·å–æ›´æ–°åçš„å€¼ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("åŸå› ")]),t._v("ï¼šåŸç”Ÿäº‹ä»¶æ˜¯æµè§ˆå™¨æœ¬èº«çš„å®ç°ï¼Œä¸äº‹åŠ¡æµæ— å…³ï¼Œè‡ªç„¶æ˜¯åŒæ­¥çš„ï¼›è€Œ "),n("code",[t._v("setTimeout")]),t._v(" æ˜¯æ”¾ç½®äºå®šæ—¶å™¨çº¿ç¨‹ä¸­å»¶åæ‰§è¡Œï¼Œæ­¤æ—¶äº‹åŠ¡æµå·²ç»“æŸï¼Œå› æ­¤ä¹Ÿæ˜¯åŒæ­¥ã€‚")]),t._v(" "),n("p",[t._v("â“ "),n("strong",[t._v("ä¸ºä»€ä¹ˆ React å¤„ç† setState è¦å®è¡Œå¼‚æ­¥æ›´æ–°æœºåˆ¶ï¼Ÿ")])]),t._v(" "),n("p",[t._v("ç”±äº "),n("code",[t._v("setState")]),t._v(" ä¼šè§¦å‘ç»„ä»¶çš„æ›´æ–°æ¸²æŸ“ï¼Œä¹Ÿå°±ä¼šè¿è¡Œç»„ä»¶çš„ diff ç®—æ³•ã€‚å¦‚æœæ¯æ¬¡ "),n("code",[t._v("setState")]),t._v(" éƒ½è¦è¿è¡Œè¿™å¥—æµç¨‹ï¼Œå°†ä¼šååˆ†æ¶ˆè€—æ€§èƒ½ï¼Œå¹¶ä¸”å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("æ€»ç»“ "),n("code",[t._v("state")]),t._v(" å®ç°å¼‚æ­¥æ›´æ–°çš„ç†ç”±")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("React è¿è¡Œæœºåˆ¶çš„æ€§èƒ½è€ƒè™‘")]),t._v(" "),n("li",[t._v("è¿™å°†ç ´å "),n("code",[t._v("props")]),t._v(" å’Œ "),n("code",[t._v("state")]),t._v(" ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œå¼•èµ·é—®é¢˜ï¼Œéå¸¸éš¾ä»¥è°ƒè¯•")]),t._v(" "),n("li",[t._v("è¿™å°†ä½¿ä¸€äº› React æ–°ç‰¹æ€§ä¸èƒ½å®ç°")])]),t._v(" "),n("p",[t._v("æ·±å…¥ç ”ç©¶è¯·æŸ¥é˜…ï¼šğŸ“– "),n("router-link",{attrs:{to:"/mechanism/setState.html"}},[t._v("setState")])],1),t._v(" "),n("h3",{attrs:{id:"æ‰¹é‡æ›´æ–°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‰¹é‡æ›´æ–°","aria-hidden":"true"}},[t._v("#")]),t._v(" æ‰¹é‡æ›´æ–°")]),t._v(" "),n("p",[t._v("åœ¨"),n("strong",[t._v("åˆæˆäº‹ä»¶")]),t._v("å’Œ"),n("strong",[t._v("ç”Ÿå‘½å‘¨æœŸå‡½æ•°")]),t._v("ä¸­ï¼Œ"),n("code",[t._v("setState")]),t._v(" æ›´æ–°é˜Ÿåˆ—æ—¶ï¼Œå­˜å‚¨çš„æ˜¯åˆå¹¶çŠ¶æ€ï¼ˆ"),n("code",[t._v("Object.assign")]),t._v("ï¼‰ã€‚å› æ­¤å‰é¢è®¾ç½®çš„é”®å€¼ä¼šè¢«åé¢è®¾ç½®çš„é”®å€¼è¦†ç›–ï¼Œæœ€ç»ˆåªä¼šæ‰§è¡Œä¸€æ¬¡æ›´æ–°ã€‚")]),t._v(" "),n("p",[t._v("å¦å¤–éœ€è¦æ³¨æ„çš„äº‹ï¼ŒåŒæ ·ä¸èƒ½ä¾èµ–å½“å‰çš„ Props è®¡ç®—ä¸‹ä¸ªçŠ¶æ€ï¼Œå› ä¸º Props ä¸€èˆ¬ä¹Ÿæ˜¯ä»çˆ¶ç»„ä»¶çš„ State ä¸­è·å–ï¼Œä¾ç„¶æ— æ³•ç¡®å®šåœ¨ç»„ä»¶çŠ¶æ€æ›´æ–°æ—¶çš„å€¼ã€‚")]),t._v(" "),n("p",[t._v("ç”±äº Fiber åŠåˆå¹¶çš„é—®é¢˜ï¼Œå®˜æ–¹æ¨èå¯ä»¥ä¼ å…¥å‡½æ•°çš„å½¢å¼ä½¿ç”¨ "),n("code",[t._v("setState")]),t._v(" ã€‚ä½¿ç”¨å‡½æ•°å¼ï¼Œå¯ä»¥ç”¨äºé¿å… "),n("code",[t._v("setState")]),t._v(" çš„æ‰¹é‡æ›´æ–°çš„é€»è¾‘ï¼Œä¼ å…¥çš„å‡½æ•°å°†ä¼šè¢«"),n("strong",[t._v("é¡ºåºè°ƒç”¨")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æ‰¹é‡æ›´æ–°ä»¥ç”Ÿå‘½å‘¨æœŸä¸ºç•Œï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ç»„ä»¶æŒ‚è½½å‰çš„æ‰€æœ‰ "),n("code",[t._v("setState")]),t._v(" æ‰¹é‡æ›´æ–°")]),t._v(" "),n("li",[t._v("ç»„ä»¶æŒ‚è½½ååˆ°æ›´æ–°å‰çš„æ‰€æœ‰ "),n("code",[t._v("setState")]),t._v(" æ‰¹é‡æ›´æ–°")]),t._v(" "),n("li",[t._v("æ¯æ¬¡æ›´æ–°é—´éš™çš„æ‰€æœ‰ "),n("code",[t._v("setState")]),t._v(" æ‰¹é‡æ›´æ–°")])]),t._v(" "),n("p",[t._v("âš ï¸ æ³¨æ„äº‹é¡¹ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("setState")]),t._v(" åˆå¹¶ï¼Œåœ¨åˆæˆäº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å¤šæ¬¡è¿ç»­è°ƒç”¨ä¼šè¢«ä¼˜åŒ–ä¸ºä¸€æ¬¡ï¼›")]),t._v(" "),n("li",[t._v("å½“ç»„ä»¶å·²è¢«é”€æ¯ï¼Œå¦‚æœå†æ¬¡è°ƒç”¨ "),n("code",[t._v("setState")]),t._v("ï¼ŒReact ä¼šè¢«æŠ¥é”™è­¦å‘Šï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³åŠæ³•\n"),n("ul",[n("li",[t._v("å°†æ•°æ®æŒ‚è½½åœ¨å¤–éƒ¨ï¼Œé€šè¿‡ Props ä¼ å…¥ï¼Œå¦‚æ”¾åˆ° Redux æˆ–çˆ¶çº§ä¸­ï¼›")]),t._v(" "),n("li",[t._v("åœ¨ç»„ä»¶å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªçŠ¶æ€é‡ï¼ˆisUnmountedï¼‰ï¼Œ"),n("code",[t._v("componentWillUnmount")]),t._v(" ä¸­æ ‡è®°ä¸º "),n("code",[t._v("true")]),t._v("ï¼Œåœ¨ "),n("code",[t._v("setState")]),t._v(" å‰è¿›è¡Œåˆ¤æ–­ï¼›")]),t._v(" "),n("li",[t._v("å¦‚æœæ˜¯å¼‚æ­¥è¯·æ±‚å‰¯ä½œç”¨ï¼Œå¯ä»¥åœ¨ "),n("code",[t._v("componentWillUnmount")]),t._v(" ä¸­å–æ¶ˆæœªå“åº”çš„å¼‚æ­¥è¯·æ±‚ã€‚")])])])]),t._v(" "),n("h2",{attrs:{id:"æœ€ä½³å®è·µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ä½³å®è·µ","aria-hidden":"true"}},[t._v("#")]),t._v(" æœ€ä½³å®è·µ")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#%E7%9B%B8%E5%90%8C%E5%91%A8%E6%9C%9F%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8"}},[t._v("ç›¸åŒå‘¨æœŸå¤šæ¬¡è°ƒç”¨")])]),t._v(" "),n("li",[n("strong",[t._v("åŒæ­¥æ›´æ–°ç­–ç•¥")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#%E5%AE%8C%E6%88%90%E5%9B%9E%E8%B0%83"}},[t._v("å®Œæˆå›è°ƒ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#%E4%BC%A0%E5%85%A5%E7%8A%B6%E6%80%81%E8%AE%A1%E7%AE%97%E5%87%BD%E6%95%B0"}},[t._v("ä¼ å…¥çŠ¶æ€è®¡ç®—å‡½æ•°")])])])])]),t._v(" "),n("h3",{attrs:{id:"ç›¸åŒå‘¨æœŸå¤šæ¬¡è°ƒç”¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸åŒå‘¨æœŸå¤šæ¬¡è°ƒç”¨","aria-hidden":"true"}},[t._v("#")]),t._v(" ç›¸åŒå‘¨æœŸå¤šæ¬¡è°ƒç”¨")]),t._v(" "),n("p",[t._v("å½“ç›¸åŒå‘¨æœŸå†…å¤šæ¬¡è°ƒç”¨ "),n("code",[t._v("setState()")]),t._v(" ä»¥æ›´æ–°ç›¸åŒçš„çŠ¶æ€æ—¶ï¼Œè¿™äº›è°ƒç”¨å¯èƒ½ä¼šè¢«åˆå¹¶åœ¨ä¸€èµ·ã€‚")]),t._v(" "),n("p",[t._v("è®¾æƒ³æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨ "),n("code",[t._v("onClick")]),t._v(" é‡Œç´¯åŠ ä¸¤æ¬¡ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("å½“ React å¯¹ä»£ç è¿›è¡Œè§£ææ—¶ï¼Œä¼šå¯¹ä¸Šè¿°ä»£ç ä½œä»¥ä¸‹è§£æï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tpreviousState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("ç”±äºåé¢çš„æ•°æ®ä¼šè¦†ç›–å‰é¢çš„æ›´æ”¹ï¼Œæ‰€ä»¥æœ€ç»ˆåªåŠ äº†ä¸€æ¬¡ã€‚æ‰€ä»¥å¦‚æœæ˜¯ä¸‹ä¸€ä¸ª State çš„æ›´æ–°ä¾èµ–å‰ä¸€ä¸ª State çš„æƒ…å†µä¸‹ï¼Œæ¨è "),n("code",[t._v("setState()")]),t._v(" çš„ "),n("code",[t._v("updater")]),t._v(" å‚æ•°ä½¿ç”¨å‡½æ•°å½¢å¼ä¼ å…¥ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quantity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" quantity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quantity "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"åŒæ­¥æ›´æ–°ç­–ç•¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŒæ­¥æ›´æ–°ç­–ç•¥","aria-hidden":"true"}},[t._v("#")]),t._v(" åŒæ­¥æ›´æ–°ç­–ç•¥")]),t._v(" "),n("p",[t._v("ç”±äº "),n("code",[t._v("setState")]),t._v(" é‡‡å–å¼‚æ­¥æ‰¹é‡æ›´æ–°ç­–ç•¥ï¼Œè€Œå®é™…ä¸šåŠ¡ä¸­æŸäº›åœºæ™¯éœ€è¦ç”¨åˆ°åŒæ­¥æ›´æ–°é€»è¾‘ã€‚")]),t._v(" "),n("p",[t._v("ğŸŒ° æ¡ˆä¾‹ï¼šä»æœåŠ¡ç«¯è¯·æ±‚æ•°æ®å¹¶ä¸”æ¸²æŸ“åˆ°é¡µé¢åï¼Œéšè—åŠ è½½è¿›åº¦æ¡æˆ–è€…å¤–éƒ¨åŠ è½½æç¤º "),n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/24781259",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŸæ–‡"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://example.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("something")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" something "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        StatusBar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNetworkActivityIndicatorVisible")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("å› ä¸º "),n("code",[t._v("setState")]),t._v(" å‡½æ•°å¹¶"),n("strong",[t._v("ä¸ä¼šé˜»å¡")]),t._v("ç­‰å¾…çŠ¶æ€æ›´æ–°å®Œæ¯•ï¼Œå› æ­¤ "),n("code",[t._v("setNetworkActivityIndicatorVisible")]),t._v(" æœ‰å¯èƒ½å…ˆäºæ•°æ®æ¸²æŸ“å®Œæ¯•å°±æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨ "),n("code",[t._v("componentWillUpdate")]),t._v(" ä¸ "),n("code",[t._v("componentDidUpdate")]),t._v(" è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ "),n("code",[t._v("setNetworkActivityIndicatorVisible")]),t._v("ï¼Œä½†æ˜¯ä¼šè®©ä»£ç å˜å¾—ç ´ç¢ï¼Œå¯è¯»æ€§ä¹Ÿä¸å¥½ã€‚")]),t._v(" "),n("p",[t._v("å®é™…ä¸Šåœ¨é¡¹ç›®å¼€å‘ä¸­æˆ‘ä»¬æ›´é¢‘ç¹é‡è§æ­¤ç±»é—®é¢˜çš„åœºæ™¯æ˜¯é€šè¿‡æŸä¸ªå˜é‡æ§åˆ¶å…ƒç´ å¯è§æ€§ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  showForm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showForm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("æˆ‘ä»¬é¢„æœŸçš„æ•ˆæœæ˜¯æ¯æ¬¡äº‹ä»¶è§¦å‘åæ”¹å˜è¡¨å•çš„å¯è§æ€§ï¼Œä½†æ˜¯åœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­å¦‚æœäº‹ä»¶çš„è§¦å‘é€Ÿåº¦å¿«äº "),n("code",[t._v("setState")]),t._v(" çš„æ›´æ–°é€Ÿåº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å€¼è®¡ç®—å®Œå…¨å°±æ˜¯é”™çš„ã€‚æœ¬èŠ‚å°±æ˜¯è®¨è®ºä¸¤ç§æ–¹å¼æ¥ä¿è¯ "),n("code",[t._v("setState")]),t._v(" çš„åŒæ­¥æ›´æ–°ã€‚")]),t._v(" "),n("h4",{attrs:{id:"å®Œæˆå›è°ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®Œæˆå›è°ƒ","aria-hidden":"true"}},[t._v("#")]),t._v(" å®Œæˆå›è°ƒ")]),t._v(" "),n("p",[n("code",[t._v("setState")]),t._v(" å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å…è®¸ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œ"),n("strong",[t._v("åœ¨çŠ¶æ€æ›´æ–°å®Œæ¯•åè¿›è¡Œè°ƒç”¨")]),t._v("ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    load"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åŠ è½½å®Œæˆ'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("è¿™é‡Œå›è°ƒå‡½æ•°ç”¨æ³•ç›¸ä¿¡å¤§å®¶å¾ˆç†Ÿæ‚‰ï¼Œå°±æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å¼•ç”¨ Promise æ¥å°è£… setStateï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateAsync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("setStateAsync è¿”å›çš„æ˜¯ Promise å¯¹è±¡ï¼Œåœ¨è°ƒç”¨æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Async/Await è¯­æ³•æ¥ä¼˜åŒ–ä»£ç é£æ ¼ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    StatusBar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNetworkActivityIndicatorVisible")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://api.ipify.org?format=json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateAsync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ipAddress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    StatusBar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNetworkActivityIndicatorVisible")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ä¿è¯åœ¨ setState æ¸²æŸ“å®Œæ¯•ä¹‹åè°ƒç”¨å¤–éƒ¨çŠ¶æ€æ å°†ç½‘ç»œè¯·æ±‚çŠ¶æ€ä¿®æ”¹ä¸ºå·²ç»“æŸï¼Œæ•´ä¸ªç»„ä»¶çš„å®Œæ•´å®šä¹‰ä¸ºï¼š")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AwesomeProject")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateAsync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),n("span",{pre:!0,attrs:{class:"token script language-javascript"}},[n("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("container"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Text")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),n("span",{pre:!0,attrs:{class:"token script language-javascript"}},[n("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("welcome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n          My IP is ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ipAddress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Unknown'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Text")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"ä¼ å…¥çŠ¶æ€è®¡ç®—å‡½æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¼ å…¥çŠ¶æ€è®¡ç®—å‡½æ•°","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¼ å…¥çŠ¶æ€è®¡ç®—å‡½æ•°")]),t._v(" "),n("p",[t._v("é™¤äº†ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼ç›‘å¬çŠ¶æ€æ›´æ–°ç»“æœä¹‹å¤–ï¼ŒReact è¿˜å…è®¸æˆ‘ä»¬ä¼ å…¥æŸä¸ªçŠ¶æ€è®¡ç®—å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡æ¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚çŠ¶æ€è®¡ç®—å‡½æ•°èƒ½å¤Ÿä¸ºæˆ‘ä»¬æä¾›å¯ä¿¡èµ–çš„ç»„ä»¶çš„ State ä¸ Props å€¼ï¼Œå³ä¼šè‡ªåŠ¨åœ°å°†æˆ‘ä»¬çš„çŠ¶æ€æ›´æ–°æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­å¹¶ç­‰å¾…å‰é¢çš„æ›´æ–°å®Œæ¯•åä¼ å…¥æœ€æ–°çš„çŠ¶æ€å€¼ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    showForm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showForm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"æµè§ˆå™¨ç›‘å¬äº‹ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨ç›‘å¬äº‹ä»¶","aria-hidden":"true"}},[t._v("#")]),t._v(" æµè§ˆå™¨ç›‘å¬äº‹ä»¶")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬1æ¬¡è¾“å‡º 0")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬2æ¬¡è¾“å‡º 0")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬3æ¬¡è¾“å‡º 2")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬4æ¬¡è¾“å‡º 3")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),n("span",{pre:!0,attrs:{class:"token script language-javascript"}},[n("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("code",[t._v("setTimeout")]),t._v(" é‡Œçš„ä¸¤æ¬¡ "),n("code",[t._v("setState")]),t._v(" çš„å€¼åŒæ­¥æ›´æ–°äº†ï¼Œ")]),t._v(" "),n("p",[t._v("åœ¨ React ä¸­ï¼Œå¦‚æœæ˜¯ç”± React å¼•å‘çš„äº‹ä»¶å¤„ç†ï¼ˆæ¯”å¦‚ï¼šonClick å¼•å‘çš„äº‹ä»¶å¤„ç†ï¼‰ï¼Œè°ƒç”¨ setState ä¸ä¼šåŒæ­¥æ›´æ–° "),n("code",[t._v("this.state")]),t._v("ï¼Œé™¤æ­¤ä¹‹å¤–çš„ setState è°ƒç”¨ä¼šåŒæ­¥æ‰§è¡Œ "),n("code",[t._v("this.setState")]),t._v('ã€‚"é™¤æ­¤ä¹‹å¤–"æŒ‡çš„æ˜¯ï¼šç»•è¿‡ React é€šè¿‡ addEventListener ç›´æ¥æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°å’Œ '),n("code",[t._v("setTimeout/setInterval")]),t._v(" äº§ç”Ÿçš„å¼‚æ­¥è°ƒç”¨ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å®ç°æµç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°æµç¨‹","aria-hidden":"true"}},[t._v("#")]),t._v(" å®ç°æµç¨‹")]),t._v(" "),n("p",[t._v("setState æµç¨‹è¿˜æ˜¯å¾ˆå¤æ‚çš„ï¼Œè®¾è®¡ä¹Ÿå¾ˆç²¾å·§ï¼Œé¿å…äº†é‡å¤æ— è°“çš„åˆ·æ–°ç»„ä»¶ã€‚å®ƒçš„ä¸»è¦æµç¨‹å¦‚ä¸‹")]),t._v(" "),n("ol",[n("li",[t._v("enqueueSetState å°† state æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¹¶è°ƒç”¨ enqueueUpdate å¤„ç†è¦æ›´æ–°çš„ Component")]),t._v(" "),n("li",[t._v("å¦‚æœç»„ä»¶å½“å‰æ­£å¤„äº update äº‹åŠ¡ä¸­ï¼Œåˆ™å…ˆå°† Component å­˜å…¥ dirtyComponent ä¸­ã€‚å¦åˆ™è°ƒç”¨ batchedUpdates å¤„ç†ã€‚")]),t._v(" "),n("li",[t._v("batchedUpdates å‘èµ·ä¸€æ¬¡ transaction.perform()äº‹åŠ¡")]),t._v(" "),n("li",[t._v("å¼€å§‹æ‰§è¡Œäº‹åŠ¡åˆå§‹åŒ–ï¼Œè¿è¡Œï¼Œç»“æŸä¸‰ä¸ªé˜¶æ®µ\n"),n("ul",[n("li",[t._v("åˆå§‹åŒ–ï¼šäº‹åŠ¡åˆå§‹åŒ–é˜¶æ®µæ²¡æœ‰æ³¨å†Œæ–¹æ³•ï¼Œæ•…æ— æ–¹æ³•è¦æ‰§è¡Œ")]),t._v(" "),n("li",[t._v("è¿è¡Œï¼šæ‰§è¡Œ setSate æ—¶ä¼ å…¥çš„ callback æ–¹æ³•ï¼Œä¸€èˆ¬ä¸ä¼šä¼  callback å‚æ•°")]),t._v(" "),n("li",[t._v("ç»“æŸï¼šæ›´æ–° isBatchingUpdates ä¸º falseï¼Œå¹¶æ‰§è¡Œ FLUSH_BATCHED_UPDATES è¿™ä¸ª wrapper ä¸­çš„ close æ–¹æ³•")])])]),t._v(" "),n("li",[t._v("FLUSH_BATCHED_UPDATES åœ¨ close é˜¶æ®µï¼Œä¼šå¾ªç¯éå†æ‰€æœ‰çš„ dirtyComponentsï¼Œè°ƒç”¨ updateComponent åˆ·æ–°ç»„ä»¶ï¼Œå¹¶æ‰§è¡Œå®ƒçš„ pendingCallbacks, ä¹Ÿå°±æ˜¯ setState ä¸­è®¾ç½®çš„ callbackã€‚")])]),t._v(" "),n("h2",{attrs:{id:"æ€»ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),n("ul",[n("li",[t._v("setState ä¸ä¼šç«‹å³æ›´æ”¹ React ç»„ä»¶å†…çŠ¶æ€")]),t._v(" "),n("li",[t._v("setState é€šè¿‡å¼•å‘ä¸€æ¬¡ç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹æ¥å¼•å‘é‡æ–°æ¸²æŸ“\n"),n("ul",[n("li",[t._v("shouldComponentUpdateï¼ˆè¢«è°ƒç”¨æ—¶ï¼Œ"),n("code",[t._v("this.state")]),t._v(" æ²¡æœ‰æ›´æ–°ï¼›å¦‚æœè¿”å› "),n("code",[t._v("false")]),t._v("ï¼Œç”Ÿå‘½å‘¨æœŸä¸­æ–­ï¼Œä½† "),n("code",[t._v("this.state")]),t._v(" ä»ä¼šæ›´æ–°ï¼‰")]),t._v(" "),n("li",[t._v("componentWillUpdateï¼ˆè¢«è°ƒç”¨æ—¶ "),n("code",[t._v("this.state")]),t._v(" æ²¡æœ‰æ›´æ–°ï¼‰")]),t._v(" "),n("li",[t._v("renderï¼ˆè¢«è°ƒç”¨æ—¶ "),n("code",[t._v("this.setState")]),t._v(" å¾—åˆ°æ›´æ–°ï¼‰")]),t._v(" "),n("li",[t._v("componentDidUpdate")])])]),t._v(" "),n("li",[t._v("setState çš„å¤šæ¬¡è°ƒç”¨äº§ç”Ÿçš„æ•ˆæœå°†è¢«åˆå¹¶")])]),t._v(" "),n("hr"),t._v(" "),n("p",[n("strong",[t._v("å¼•ç”¨å‚è€ƒï¼š")])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/5a155f906fb9a045284622b4",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€Reactã€‘setState è¯¦è§£"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5b87d14e6fb9a01a18268caf",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ­ç§˜ React setState"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/24781259",target:"_blank",rel:"noopener noreferrer"}},[t._v("React ä¸­ setState çš„åŒæ­¥æ›´æ–°ç­–ç•¥"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/7d2f9e582403",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä» setState Promise åŒ–çš„æ¢è®¨ä½“ä¼š React å›¢é˜Ÿè®¾è®¡æ€æƒ³"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5b45d406f265da0f8e19d4c8?utm_medium=hao.caibaojian.com&utm_source=hao.caibaojian.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("React çš„ç”Ÿå‘½å‘¨æœŸä¸ setState çš„å…³ç³»"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://overreacted.io/how-does-setstate-know-what-to-do/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How Does setState Know What to Do?"),n("OutboundLink")],1)])])])},[],!1,null,null,null);s.default=e.exports}}]);