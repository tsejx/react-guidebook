(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{192:function(t,s,a){t.exports=a.p+"assets/img/react-lifecycle-methods-diagram.f88599b9.jpg"},212:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"ç”Ÿå‘½å‘¨æœŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿå‘½å‘¨æœŸ","aria-hidden":"true"}},[t._v("#")]),t._v(" ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),n("p",[t._v("ç”Ÿå‘½å‘¨æœŸæŒ‡ React ç»„ä»¶ä»è£…è½½è‡³å¸è½½çš„å…¨è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å†…ç½®å¤šä¸ªå‡½æ•°ä¾›å¼€å‘è€…åœ¨ç»„ä»¶çš„ä¸åŒé˜¶æ®µæ‰§è¡Œéœ€è¦çš„é€»è¾‘ã€‚")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("è£…è½½é˜¶æ®µ Mounting")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#constructor"}},[n("strong",[n("code",[t._v("constructor")])])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#static-getderivedstatefromprops"}},[n("strong",[n("code",[t._v("static getDerivedStateFromProps")])])])]),t._v(" "),n("li",[t._v("âš ï¸ "),n("a",{attrs:{href:"#unsafe_componentwillmount"}},[n("code",[t._v("UNSAFE_componentWillMount")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#render"}},[n("strong",[n("code",[t._v("render")])])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#componentdidmount"}},[n("strong",[n("code",[t._v("componentDidMount")])])])])])]),t._v(" "),n("li",[n("strong",[t._v("æ›´æ–°é˜¶æ®µ Updating")]),t._v(" "),n("ul",[n("li",[t._v("âš ï¸ "),n("a",{attrs:{href:"#unsafe_componentwillreceiveprops"}},[t._v("UNSAFE_componentWillReceiveProps")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#unsafe_componentwillreceivepropsnextprops"}},[n("strong",[n("code",[t._v("static getDerivedStateFromProps")])])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#shouldcomponentupdate"}},[n("code",[t._v("shouldComponentUpdate")])])]),t._v(" "),n("li",[t._v("âš ï¸ "),n("a",{attrs:{href:"#unsafe_componentwillupdate"}},[t._v("UNSAFE_componentWillUpdate")])]),t._v(" "),n("li",[n("strong",[n("code",[t._v("render")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#getsnapshotbeforeupdate"}},[n("code",[t._v("getSnapshotBeforeUpdate")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#componentdidupdate"}},[n("strong",[n("code",[t._v("componentDidUpdate")])])])])])]),t._v(" "),n("li",[n("strong",[t._v("å¸è½½é˜¶æ®µ Unmounting")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#componentwillunmount"}},[n("strong",[n("code",[t._v("componentWillUnmount")])])])])])]),t._v(" "),n("li",[n("strong",[t._v("æ•æ‰é”™è¯¯ Error Handling")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#static-getderivedstatefromerror"}},[n("code",[t._v("static getDerivedStateFromError")])])]),t._v(" "),n("li",[n("a",{attrs:{href:"#componentdidcatch"}},[n("code",[t._v("componentDidCatch")])])])])])]),t._v(" "),n("p",[t._v("çŠ¶æ€ç»„ä»¶ä¸»è¦é€šè¿‡ 3 ä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µæ¥ç®¡ç†ï¼Œåˆ†åˆ«æ˜¯ "),n("code",[t._v("MOUNT")]),t._v("ï¼Œ"),n("code",[t._v("UPDAT")]),t._v(" å’Œ "),n("code",[t._v("UNMOUNT")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ä»çºµå‘åˆ’åˆ†ï¼Œå¯ä»¥åˆ’åˆ†ä¸º Render é˜¶æ®µå’Œ Commit é˜¶æ®µã€‚")]),t._v(" "),n("ul",[n("li",[t._v("Render é˜¶æ®µï¼šçº¯å‡€ä¸”ä¸åŒ…å«å‰¯ä½œç”¨ï¼Œå¯èƒ½ä¼šè¢« React æš‚åœã€ä¸­æ­¢æˆ–é‡æ–°å¯åŠ¨")]),t._v(" "),n("li",[t._v("Commit é˜¶æ®µï¼šå¯ä»¥ä½¿ç”¨ DOMï¼Œè¿è¡Œå‰¯ä½œç”¨ï¼Œå®‰æ’æ›´æ–°")])]),t._v(" "),n("p",[n("a",{attrs:{href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Lifecycle Methods Diagram"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("img",{attrs:{src:a(192),alt:"React Lifecycle Methods Diagram"}})]),t._v(" "),n("h2",{attrs:{id:"è£…è½½é˜¶æ®µ-mounting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è£…è½½é˜¶æ®µ-mounting","aria-hidden":"true"}},[t._v("#")]),t._v(" è£…è½½é˜¶æ®µ Mounting")]),t._v(" "),n("p",[t._v("ç»„ä»¶çš„æ¸²æŸ“å¹¶ä¸”æ„é€  DOM å…ƒç´ æ’å…¥åˆ°é¡µé¢çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„"),n("strong",[t._v("è£…è½½")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("è£…è½½é˜¶æ®µæ‰§è¡Œçš„å‡½æ•°ä¼šåœ¨ç»„ä»¶å®ä¾‹è¢«"),n("strong",[t._v("åˆ›å»º")]),t._v("å’Œ"),n("strong",[t._v("æ’å…¥")]),t._v(" DOM ä¸­æ—¶è¢«è§¦å‘ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸»è¦å®ç°"),n("strong",[t._v("ç»„ä»¶çŠ¶æ€çš„åˆå§‹åŒ–")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"constructor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#constructor","aria-hidden":"true"}},[t._v("#")]),t._v(" constructor")]),t._v(" "),n("p",[n("strong",[t._v("æ„é€ å‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("constructor(props, context, updater)")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("props")]),t._v("ï¼šç»§æ‰¿ React.Component çš„å±æ€§æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸å¯å˜çš„ read-only")]),t._v(" "),n("li",[n("code",[t._v("context")]),t._v("ï¼šå…¨å±€ä¸Šä¸‹æ–‡ã€‚")]),t._v(" "),n("li",[n("code",[t._v("updater")]),t._v("ï¼šåŒ…å«ä¸€äº›æ›´æ–°æ–¹æ³•çš„å¯¹è±¡\n"),n("ul",[n("li",[n("code",[t._v("this.setState")]),t._v(" æœ€ç»ˆè°ƒç”¨çš„æ˜¯ "),n("code",[t._v("this.updater.enqueueSetState")])]),t._v(" "),n("li",[n("code",[t._v("this.forceUpdate")]),t._v(" æœ€ç»ˆè°ƒç”¨çš„æ˜¯ "),n("code",[t._v("this.updater.enqueueForceUpdate")]),t._v(" æ–¹æ³•ï¼Œæ‰€ä»¥è¿™äº› API æ›´å¤šæ˜¯ React è°ƒç”¨ä½¿ç”¨ï¼Œæš´éœ²å‡ºæ¥ä»¥å¤‡å¼€å‘è€…ä¸æ—¶ä¹‹éœ€ã€‚")])])])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šåœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™è§¦å‘ä¸€æ¬¡ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ "),n("strong",[t._v("ä½¿ç”¨å»ºè®®")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è®¾ç½®åˆå§‹åŒ–çŠ¶æ€ï¼šå› ä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ä»»ä½•å‡½æ•°éƒ½å¯èƒ½è¦è®¿é—® Stateï¼Œé‚£ä¹ˆæ•´ä¸ªå‘¨æœŸä¸­ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°ä¾¿æ˜¯åˆå§‹åŒ– State æœ€ç†æƒ³çš„åœ°æ–¹ï¼›")]),t._v(" "),n("li",[t._v("ç»‘å®šæˆå‘˜å‡½æ•°ä¸Šä¸‹æ–‡å¼•ç”¨ï¼š\n"),n("ul",[n("li",[t._v("å› ä¸ºåœ¨ ES6 è¯­æ³•ä¸‹ï¼Œç±»çš„æ¯ä¸ªæˆå‘˜å‡½æ•°åœ¨æ‰§è¡Œæ—¶çš„ "),n("code",[t._v("this")]),t._v(" å¹¶ä¸æ˜¯å’Œç±»å®ä¾‹è‡ªåŠ¨ç»‘å®šçš„ï¼›")]),t._v(" "),n("li",[t._v("è€Œåœ¨æ„é€ å‡½æ•°ä¸­ "),n("code",[t._v("this")]),t._v(" å°±æ˜¯å½“å‰ç»„ä»¶å®ä¾‹ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†æ–¹ä¾¿å°†æ¥è°ƒç”¨ï¼Œå¾€å¾€åœ¨æ„é€ å‡½æ•°ä¸­å°†è¿™ä¸ªå®ä¾‹çš„ç‰¹å®šå‡½æ•°ç»‘å®š "),n("code",[t._v("this")]),t._v(" ä¸ºå½“å‰ç±»å®ä¾‹ï¼›")]),t._v(" "),n("li",[t._v("å»ºè®®å®šä¹‰å‡½æ•°æ–¹æ³•æ—¶ç›´æ¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå°±æ— é¡»åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œå‡½æ•°çš„ "),n("code",[t._v("bind")]),t._v(" æ“ä½œã€‚")])])])]),t._v(" "),n("p",[t._v("åœ¨ ES6 ä¸­ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­é€šè¿‡ "),n("code",[t._v("this.state")]),t._v(" èµ‹å€¼å®ŒæˆçŠ¶æ€åˆå§‹åŒ–ï¼›é€šè¿‡ç»™ç±»å±æ€§ï¼ˆæ³¨æ„æ˜¯ç±»å±æ€§ï¼Œè€Œä¸æ˜¯ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§ï¼‰"),n("code",[t._v("defaultProps")]),t._v(" èµ‹å€¼æŒ‡å®šçš„ Props åˆå§‹å€¼ã€‚")]),t._v(" "),n("p",[t._v("ğŸŒ° "),n("strong",[t._v("ä½¿ç”¨ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sample")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'InitailValue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nSample"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultProps "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  bar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'InitialValue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"static-getderivedstatefromprops"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#static-getderivedstatefromprops","aria-hidden":"true"}},[t._v("#")]),t._v(" static getDerivedStateFromProps")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("static getDerivedStateFromProps(nextProps, prevState)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šè¯¥å‡½æ•°ä¼šåœ¨ç»„ä»¶åŒ–å®ä¾‹åŒ–åå’Œé‡æ–°æ¸²æŸ“å‰è°ƒç”¨ï¼ˆç”Ÿæˆ VirtualDOM ä¹‹åï¼Œå®é™… DOM æŒ‚è½½ä¹‹å‰ï¼‰ï¼Œæ„å‘³ç€æ— è®ºæ˜¯çˆ¶ç»„ä»¶çš„æ›´æ–°ã€props çš„å˜åŒ–æˆ–é€šè¿‡ setState æ›´æ–°ç»„ä»¶å†…éƒ¨çš„ Stateï¼Œå®ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚")]),t._v(" "),n("p",[t._v("ğŸ”™ "),n("strong",[t._v("è¿”å›å€¼")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œå®ƒéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° Stateï¼Œæˆ–è€…è¿”å› "),n("code",[t._v("null")]),t._v(" æ¥è¡¨æ˜æ–° Props ä¸éœ€è¦æ›´æ–°ä»»ä½• Stateã€‚")]),t._v(" "),n("p",[t._v("ğŸ†• "),n("strong",[t._v("æ–°ç‰¹æ€§")]),t._v("ï¼šå½“ç»„ä»¶å®ä¾‹åŒ–æ—¶ï¼Œè¯¥æ–¹æ³•æ›¿ä»£äº† componentWillMountï¼Œè€Œå½“æ¥æ”¶æ–°çš„ props æ—¶ï¼Œè¯¥æ–¹æ³•æ›¿ä»£äº† componentWillReceiveProps å’Œ componentWillUpdateã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("åœ¨ç»„ä»¶è£…è½½å’Œæ›´æ–°é˜¶æ®µéƒ½ä¼šè§¦å‘ã€‚")]),t._v(" "),n("li",[t._v("å¦‚æœçˆ¶ç»„ä»¶å¯¼è‡´äº†ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å±æ€§æ²¡æœ‰æ›´æ–°ï¼Œè¿™ä¸€æ–¹æ³•ä¹Ÿä¼šè¢«è§¦å‘ï¼›")]),t._v(" "),n("li",[t._v("å¦‚æœä½ åªæƒ³å¤„ç† Props çš„å‰åå˜åŒ–ï¼Œä½ éœ€è¦å°†ä¸Šä¸€ä¸ª Props å€¼å­˜åˆ° State é‡Œä½œä¸ºé•œåƒï¼›")])]),t._v(" "),n("ul",[n("li",[t._v("è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä½“å†…æ— æ³•è®¿é—®æŒ‡å‘å½“å‰ç»„ä»¶å®ä¾‹çš„æŒ‡é’ˆ "),n("code",[t._v("this")]),t._v("ï¼›")]),t._v(" "),n("li",[t._v("å½“éœ€è¦æ›´æ–° State æ—¶ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ï¼Œè¿”å›ä¸€ä¸ª "),n("code",[t._v("null")])])]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šè¡¨å•è·å–é»˜è®¤å€¼")]),t._v(" "),n("p",[t._v("â“ "),n("strong",[t._v("ä¸ºä»€ä¹ˆè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¦è®¾è®¡æˆé™æ€æ–¹æ³•å‘¢ï¼Ÿ")])]),t._v(" "),n("p",[t._v("è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¢«è®¾è®¡æˆé™æ€æ–¹æ³•çš„ç›®çš„æ˜¯ä¸ºäº†"),n("strong",[t._v("ä¿æŒè¯¥æ–¹æ³•çš„çº¯ç²¹")]),t._v("ã€‚é€šè¿‡æ›´å…·çˆ¶ç»„ä»¶è¾“å…¥çš„ Props æŒ‰éœ€æ›´æ–° Stateï¼Œè¿™ç§ State å«åšè¡ç”Ÿ Stateï¼Œè¿”å›çš„å¯¹è±¡å°±æ˜¯è¦å¢é‡æ›´æ–°çš„ Stateï¼Œé™¤æ­¤ä¹‹å¤–ä¸åº”è¯¥åœ¨é‡Œé¢æ‰§è¡Œä»»ä½•æ“ä½œã€‚")]),t._v(" "),n("p",[t._v("é€šè¿‡è®¾è®¡æˆé™æ€æ–¹æ³•ï¼Œèƒ½å¤Ÿèµ·åˆ°é™åˆ¶å¼€å‘è€…æ— æ³•è®¿é—® "),n("code",[t._v("this")]),t._v(" ä¹Ÿå°±æ˜¯å®ä¾‹çš„ä½œç”¨ï¼Œè¿™æ ·å°±ä¸èƒ½åœ¨é‡Œé¢è°ƒç”¨å®ä¾‹æ–¹æ³•æˆ–è€… "),n("code",[t._v("setState")]),t._v(" ä»¥ç ´åè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åŠŸèƒ½ã€‚")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("React")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹Ÿç»å†äº†ä¸€äº›æ³¢æŠ˜ï¼ŒåŸæœ¬å®ƒæ˜¯è¢«è®¾è®¡æˆ "),n("code",[t._v("åˆå§‹åŒ–")]),t._v("ã€"),n("code",[t._v("çˆ¶ç»„ä»¶æ›´æ–°")]),t._v(" å’Œ "),n("code",[t._v("æ¥æ”¶åˆ° Props")]),t._v(" æ‰ä¼šè§¦å‘ï¼Œç°åœ¨åªè¦æ¸²æŸ“å°±ä¼šè§¦å‘ï¼Œä¹Ÿå°±æ˜¯ "),n("code",[t._v("åˆå§‹åŒ–")]),t._v(" å’Œ "),n("code",[t._v("æ›´æ–°é˜¶æ®µ")]),t._v(" éƒ½ä¼šè§¦å‘ã€‚")]),t._v(" "),n("p",[t._v("ğŸŒ° "),n("strong",[t._v("ä½¿ç”¨ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDerivedStateFromProps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translateX "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translateX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      translateX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translateX\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"unsafe-componentwillmount"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#unsafe-componentwillmount","aria-hidden":"true"}},[t._v("#")]),t._v(" UNSAFE_componentWillMount")]),t._v(" "),n("blockquote",[n("p",[t._v("ğŸ—‘ æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°†åœ¨ React v17 æ­£å¼åºŸå¼ƒã€‚")])]),t._v(" "),n("p",[n("strong",[t._v("é¢„è£…è½½å‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šåœ¨æ„é€ å‡½æ•°å’Œè£…è½½ç»„ä»¶ï¼ˆå°† DOM æ ‘æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­ï¼‰ä¹‹é—´è§¦å‘ã€‚è£…è½½ç»„ä»¶åå°†æ‰§è¡Œ "),n("code",[t._v("render")]),t._v(" æ¸²æŸ“å‡½æ•°ã€‚å› æ­¤åœ¨æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°é‡Œä½¿ç”¨ "),n("code",[t._v("setState")]),t._v(" åŒæ­¥è®¾ç½®ç»„ä»¶å†…éƒ¨çŠ¶æ€ State å°†ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼šé¿å…åœ¨è¯¥æ–¹æ³•ä¸­å¼•å…¥ä»»ä½•çš„å‰¯ä½œç”¨ï¼ˆEffectsï¼‰æˆ–è®¢é˜…ï¼ˆSubscriptionï¼‰ã€‚å¯¹äºè¿™äº›ä½¿ç”¨åœºæ™¯ï¼Œå»ºè®®æå‰åˆ°æ„é€ å‡½æ•°ä¸­ã€‚")]),t._v(" "),n("h3",{attrs:{id:"render"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#render","aria-hidden":"true"}},[t._v("#")]),t._v(" render")]),t._v(" "),n("p",[n("strong",[t._v("æ¸²æŸ“å‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ”™ è¿”å›å€¼ï¼šå”¯ä¸€çš„ä¸€å®šä¸èƒ½çœç•¥çš„å‡½æ•°ï¼Œè€Œä¸”å¿…é¡»æœ‰è¿”å›å€¼ã€‚è¿”å› "),n("code",[t._v("null")]),t._v(" æˆ– "),n("code",[t._v("false")]),t._v(" è¡¨ç¤ºä¸æ¸²æŸ“ä»»ä½• DOM å…ƒç´ ã€‚")]),t._v(" "),n("p",[t._v("å½“è§¦å‘æ—¶ï¼Œå…¶åº”è¯¥æ£€æŸ¥ "),n("code",[t._v("this.props")]),t._v(" å’Œ "),n("code",[t._v("this.state")]),t._v(" å¹¶è¿”å›ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("React å…ƒç´ ")]),t._v("ã€‚é€šå¸¸æ˜¯ç”± JSX åˆ›å»ºã€‚è¯¥å…ƒç´ å¯èƒ½æ˜¯ä¸€ä¸ªåŸç”Ÿ DOM ç»„ä»¶çš„è¡¨ç¤ºï¼Œå¦‚ "),n("code",[t._v("<div />")]),t._v("ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä½ å®šä¹‰çš„åˆæˆç»„ä»¶ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("æ•°ç»„å’Œç‰‡æ®µ")]),t._v("ã€‚è®©ä½ è¿”å›å¤šä¸ªå…ƒç´ çš„ç‰‡æ®µï¼ˆFragmentï¼‰ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("å­—ç¬¦ä¸²å’Œæ•°å­—")]),t._v("ã€‚è¿™äº›å°†è¢«æ¸²æŸ“ä¸º DOM ä¸­çš„æ–‡æœ¬èŠ‚ç‚¹ï¼ˆText Nodeï¼‰ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("Protals")]),t._v("ã€‚ç”± Â "),n("a",{attrs:{href:"http://react.yubolun.com/docs/portals.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ReactDOM.createPortal")]),n("OutboundLink")],1),t._v("Â  åˆ›å»ºã€‚")]),t._v(" "),n("li",[n("strong",[t._v("å¸ƒå°”å€¼å’Œ"),n("code",[t._v("null")])]),t._v("ã€‚ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ï¼ˆé€šå¸¸å­˜åœ¨äº Â  "),n("code",[t._v("return test && <Child />")]),t._v(" å†™æ³•ï¼Œå…¶ä¸­ Â "),n("code",[t._v("test")]),t._v("Â  æ˜¯å¸ƒå°”å€¼ã€‚ï¼‰")])]),t._v(" "),n("p",[t._v("å®ƒæ˜¯ä¸€ä¸ªä»…ä»…ç”¨äºæ¸²æŸ“çš„"),n("strong",[t._v("çº¯å‡½æ•°")]),t._v("ï¼Œè¿”å›å€¼å®Œå…¨å–å†³äº State å’Œ Propsï¼Œä¸èƒ½åœ¨å‡½æ•°ä¸­ä»»ä½•ä¿®æ”¹ Propsã€Stateã€è¯·æ±‚æ•°æ®ç­‰å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œä¸èƒ½è¯»å†™ DOM ä¿¡æ¯ï¼Œä¹Ÿä¸èƒ½å’Œæµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼ˆä¾‹å¦‚ "),n("code",[t._v("setTimeout")]),t._v("ï¼‰ã€‚å¦‚æœéœ€è¦å’Œæµè§ˆå™¨äº¤äº’ï¼Œåœ¨ "),n("code",[t._v("componentDidMount()")]),t._v(" ä¸­æˆ–è€…å…¶å®ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•å®Œæˆç›¸å…³äº‹åŠ¡ã€‚")]),t._v(" "),n("p",[t._v("æ­¤æ¸²æŸ“å‡½æ•°å¹¶ä¸åšå®é™…çš„æ¸²æŸ“åŠ¨ä½œï¼ˆæ¸²æŸ“åˆ° DOM æ ‘ï¼‰ï¼Œå®ƒè¿”å›çš„åªæ˜¯ä¸€ä¸ª JSX çš„æè¿°å¯¹è±¡ï¼ˆåŠç»„ä»¶å®ä¾‹ï¼‰ï¼Œä½•æ—¶è¿›è¡ŒçœŸæ­£çš„æ¸²æŸ“æ˜¯æœ‰ React åº“å†³å®šçš„ã€‚è€Œ React è‚¯å®šæ˜¯è¦æŠŠæ‰€æœ‰ç»„ä»¶è¿”å›çš„ç»“æœç»¼åˆèµ·æ¥ï¼Œæ‰èƒ½çŸ¥é“å¦‚ä½•äº§ç”ŸçœŸå®çš„ DOM æ ‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ React åº“è°ƒç”¨æ‰€æœ‰ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¹‹åï¼Œæ‰æœ‰å¯èƒ½å®Œæˆ DOM è£…è½½ï¼Œè¿™æ—¶å€™æ‰ä¼šä¾æ¬¡è°ƒç”¨ "),n("code",[t._v("componentDidMount")]),t._v(" å‡½æ•°ä½œä¸ºè£…è½½çš„æ”¶å°¾ã€‚")]),t._v(" "),n("p",[t._v("ä¿æŒ "),n("code",[t._v("render()")]),t._v(" çº¯ç²¹ï¼Œå¯ä»¥ä½¿æœåŠ¡å™¨ç«¯æ¸²æŸ“æ›´åŠ åˆ‡å®å¯è¡Œï¼Œä¹Ÿä½¿ç»„ä»¶æ›´å®¹æ˜“è¢«ç†è§£ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ æ³¨æ„äº‹é¡¹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä½¿ç”¨ "),n("code",[t._v("setState")]),t._v(" æ–¹æ³•ï¼›")]),t._v(" "),n("li",[t._v("è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä¿®æ”¹ Propsã€State ä»¥åŠæ•°æ®è¯·æ±‚ç­‰å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œã€‚")])]),t._v(" "),n("h3",{attrs:{id:"componentdidmount"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount","aria-hidden":"true"}},[t._v("#")]),t._v(" componentDidMount")]),t._v(" "),n("p",[n("strong",[t._v("è£…è½½æˆåŠŸå‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šç»„ä»¶å®Œå…¨æŒ‚è½½åˆ°ç½‘é¡µä¸Šåè§¦å‘ã€‚")]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼›ä»»ä½•ä¾èµ–äº DOM çš„åˆå§‹åŒ–æ“ä½œï¼›æ·»åŠ äº‹ä»¶ç›‘å¬ï¼›å¦‚æœä½¿ç”¨äº† Redux ä¹‹ç±»çš„æ•°æ®ç®¡ç†å·¥å…·ï¼Œä¹Ÿèƒ½è§¦å‘ action å¤„ç†æ•°æ®å˜åŒ–é€»è¾‘ã€‚")]),t._v(" "),n("p",[t._v("ğŸ”¬"),n("strong",[t._v("æ·±å…¥ç ”ç©¶")]),t._v("ï¼šè¯¥å‡½æ•°ä¸ä¼šåœ¨ "),n("code",[t._v("render")]),t._v(" å‡½æ•°è°ƒç”¨å®Œæˆä¹‹åç«‹å³è§¦å‘ï¼Œå› ä¸º "),n("code",[t._v("render")]),t._v(" å‡½æ•°ä»…ä»…æ˜¯è¿”å›äº† JSX çš„å¯¹è±¡ï¼Œå¹¶æ²¡æœ‰ç«‹å³æŒ‚è½½åˆ° DOM æ ‘ä¸Šï¼Œè€Œè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯åœ¨**ç»„ä»¶è¢«æ¸²æŸ“åˆ° DOM æ ‘ï¼ˆç§°ä¸ºåˆå§‹åŒ–æ¸²æŸ“ï¼‰**ä¹‹åè§¦å‘çš„ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨è¿›è¡ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“æ—¶ä¸ä¼šè§¦å‘ï¼ˆä»…å®¢æˆ·ç«¯æœ‰æ•ˆï¼‰ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ "),n("strong",[t._v("ä½¿ç”¨å»ºè®®")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("componentDidMount")]),t._v(" é€šå¸¸ç”¨äº"),n("strong",[t._v("åŠ è½½å¤–éƒ¨æ•°æ®")]),t._v("ï¼ˆå³å‘é€ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œä¹‹æ‰€ä»¥åœ¨ "),n("code",[t._v("componentDidMount")]),t._v(" ä¸­è€Œä¸æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œæ•°æ®è¯·æ±‚çš„åŸå› åœ¨äºï¼šå¦‚æœæ•°æ®åŠ è½½å®Œæ¯•åï¼Œå³ Props å·²ç»æœ‰å€¼äº†ï¼Œä½†æ˜¯ç»„ä»¶è¿˜æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼Œä¼šæŠ¥é”™ã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€äº›æŠŠæ•°æ®æ‹‰å–æå‰åˆ° "),n("code",[t._v("constructor")]),t._v(" å‡½æ•°çš„æ€è·¯ï¼šåœ¨ "),n("code",[t._v("contructor")]),t._v(" å‡½æ•°ä¸­ï¼Œé€šè¿‡ Promise æ¥è¿›è¡Œæ•°æ®çš„è¯·æ±‚ï¼Œå¹¶ä¸”ç»‘å®šåˆ°å½“å‰å®ä¾‹å¯¹è±¡ä¸Šï¼Œç„¶ååœ¨ "),n("code",[t._v("componentDidMount")]),t._v(" ä¸­æ‰§è¡Œ Promise æŠŠæ•°æ®æ›´æ–°åˆ° props ä¸Šã€‚")]),t._v(" "),n("li",[t._v("åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œç»„ä»¶æ‹¥æœ‰ä¸€ä¸ª DOM å±•ç°ï¼Œä½ å¯ä»¥é€šè¿‡ "),n("code",[t._v("this.getDOMNode()")]),t._v(" æ¥è·å–ç›¸åº” DOM èŠ‚ç‚¹ã€‚é€‚ç”¨äº"),n("strong",[t._v("éœ€è¦åˆå§‹åŒ– DOM èŠ‚ç‚¹çš„æ“ä½œ")]),t._v("ã€‚")]),t._v(" "),n("li",[t._v("å¦‚æœæƒ³å’Œå…¶å®ƒ JavaScript æ¡†æ¶é›†æˆï¼Œä½¿ç”¨ "),n("code",[t._v("setTimeout")]),t._v(" æˆ–è€… "),n("code",[t._v("setInterval")]),t._v(" æ¥è®¾ç½®å®šæ—¶å™¨ï¼Œæˆ–è€…å‘é€ AJAX è¯·æ±‚ï¼Œå¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­æ‰§è¡Œè¿™äº›æ“ä½œã€‚é€‚ç”¨äº "),n("strong",[t._v("AJAX è¯·æ±‚")]),t._v("ã€‚")]),t._v(" "),n("li",[t._v("æ­¤é’©å­å‡½æ•°ä¸­å…è®¸ä½¿ç”¨ setState æ”¹å˜ç»„ä»¶å†… Stateã€‚")])]),t._v(" "),n("h2",{attrs:{id:"æ›´æ–°é˜¶æ®µ-updating"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ–°é˜¶æ®µ-updating","aria-hidden":"true"}},[t._v("#")]),t._v(" æ›´æ–°é˜¶æ®µ Updating")]),t._v(" "),n("p",[t._v("å±æ€§ï¼ˆPropsï¼‰æˆ–çŠ¶æ€ï¼ˆStateï¼‰çš„æ”¹å˜ä¼šè§¦å‘ä¸€æ¬¡æ›´æ–°é˜¶æ®µï¼Œä½†æ˜¯ç»„ä»¶æœªå¿…ä¼šé‡æ–°æ¸²æŸ“ï¼Œè¿™å–å†³äº "),n("code",[t._v("shouldComponentUpdate")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"unsafe-componentwillreceiveprops"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#unsafe-componentwillreceiveprops","aria-hidden":"true"}},[t._v("#")]),t._v(" UNSAFE_componentWillReceiveProps")]),t._v(" "),n("blockquote",[n("p",[t._v("ğŸ—‘ æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°†åœ¨ React v17 æ­£å¼åºŸå¼ƒã€‚")])]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("UNSAFE_componentWillReceiveProps(nextProps)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šå½“çˆ¶ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°è¢«è°ƒç”¨ï¼Œåœ¨æ¸²æŸ“å‡½æ•°ä¸­è¢«æ¸²æŸ“çš„å­ç»„ä»¶å°±ä¼šç»å†æ›´æ–°é˜¶æ®µï¼Œä¸ç®¡çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„ Props æœ‰æ²¡æœ‰æ”¹å˜ï¼Œéƒ½ä¼šè§¦å‘è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å½“ç»„ä»¶å†…éƒ¨è°ƒç”¨ "),n("code",[t._v("setState")]),t._v(" æ›´æ–°å†…éƒ¨çŠ¶æ€ State æ—¶è§¦å‘æ›´æ–°é˜¶æ®µä¸ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚")]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šé€‚åˆç”¨äºçˆ¶å­ç»„ä»¶ä¹‹é—´çš„è”åŠ¨ï¼Œé€‚åˆçˆ¶ç»„ä»¶æ ¹æ®æŸä¸ªçŠ¶æ€æ§åˆ¶å­ç»„ä»¶çš„æ¸²æŸ“æˆ–è€…é”€æ¯ã€‚é€šè¿‡å¯¹æ¯” "),n("code",[t._v("this.props")]),t._v(" å’Œ "),n("code",[t._v("nextProps")]),t._v(" æ¥å¯¹æœ¬ç»„ä»¶å†…çš„ State è¿›è¡Œå˜æ›´ï¼Œæˆ–æ‰§è¡ŒæŸäº›æ–¹æ³•æ¥è¿›è¡Œç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ "),n("strong",[t._v("ä½¿ç”¨å»ºè®®")]),t._v("ï¼šåœ¨è¯¥å›è°ƒå‡½æ•°ä¸­ï¼Œå¯ä»¥æ ¹æ®å±æ€§çš„å˜åŒ–ï¼Œé€šè¿‡è°ƒç”¨ "),n("code",[t._v("this.setState()")]),t._v(" æ¥æ›´æ–°ç»„ä»¶çŠ¶æ€ã€‚é€šè¿‡å‚æ•° "),n("code",[t._v("nextProps")]),t._v(" è·å–æ–°çš„ Props å€¼ï¼Œè€Œæ—§çš„å±æ€§å¯ä»¥é€šè¿‡ "),n("code",[t._v("this.props")]),t._v(" è·å–ï¼ŒåŸºäºçŠ¶æ€å˜åŒ–å‰åçš„ Props å¯¹æ¯”çš„ç»“æœå»å®ç°ä¸åŒçš„è¡Œä¸ºï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚è¿™é‡Œè¿›è¡ŒçŠ¶æ€æ›´æ–°æ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸ä¼šè§¦å‘é¢å¤–çš„ "),n("code",[t._v("render")]),t._v(" ã€‚")]),t._v(" "),n("p",[t._v("ğŸ”¬"),n("strong",[t._v("æ·±å…¥ç ”ç©¶")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°éœ€è¦æä¾›æ¡ä»¶è·³å‡ºï¼Œå› ä¸ºæ›´æ–°å†…éƒ¨çŠ¶æ€ State çš„æ–¹æ³•æ˜¯ "),n("code",[t._v("this.setState()")]),t._v(" ï¼Œå¦‚æœ "),n("code",[t._v("this.setState()")]),t._v(" çš„è°ƒç”¨å¯¼è‡´ "),n("code",[t._v("componentWillReceiveProps")]),t._v(" å†è°ƒç”¨ï¼Œé‚£å°†æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ã€‚")]),t._v(" "),n("p",[t._v("ğŸŒ° "),n("strong",[t._v("ä½¿ç”¨ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillReceiveProps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nextProps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sharecard_show "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sharecard_show"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sharecard_show"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleGetCard")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("âš ï¸ æ¨èä½¿ç”¨ "),n("code",[t._v("static getDerivedStateFromProps()")]),t._v(" ä»£æ›¿ã€‚")]),t._v(" "),n("h3",{attrs:{id:"shouldcomponentupdate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shouldcomponentupdate","aria-hidden":"true"}},[t._v("#")]),t._v(" shouldComponentUpdate")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("shouldComponentUpdate(nextProps, nextState)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šæ¯æ¬¡ç»„ä»¶å› ä¸º State å’Œ Props å˜åŒ–è€Œæ›´æ–°æ—¶ï¼Œåœ¨"),n("strong",[t._v("é‡æ–°æ¸²æŸ“å‰")]),t._v("è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½ä¼šè§¦å‘ï¼Œè®© React çŸ¥é“å½“å‰ State æˆ– Props çš„æ”¹å˜æ˜¯å¦å½±å“ç»„ä»¶çš„è¾“å‡ºï¼ˆæ¸²æŸ“ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("ğŸ”™ "),n("strong",[t._v("è¿”å›å€¼")]),t._v("ï¼šæ ¹æ®é€»è¾‘åˆ¤æ–­è¿”å› "),n("code",[t._v("true")]),t._v(" è¡¨ç¤ºç»§ç»­è¿›è¡Œç»„ä»¶æ¸²æŸ“ï¼Œå¦åˆ™å°†åœæ­¢ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ã€‚é»˜è®¤è¿”å› "),n("code",[t._v("true")]),t._v("ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç»„ä»¶è§¦å‘äº†æ›´æ–°ï¼Œç»„ä»¶å°±ä¸€å®šä¼šæ›´æ–°ã€‚")]),t._v(" "),n("p",[t._v("ğŸ”¬"),n("strong",[t._v("æ·±å…¥ç ”ç©¶")]),t._v("ï¼šåœ¨ä¸€ä¸ªæ›´æ–°ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œç»„ä»¶åŠå…¶å­ç»„ä»¶å°†æ ¹æ®è¯¥æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼æ¥å†³å®šæ˜¯å¦ç»§ç»­è¿™æ¬¡æ›´æ–°è¿‡ç¨‹ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰ã€‚è¿™æ ·ä½ å¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™é˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸï¼ˆRender Lifecycleï¼‰æ–¹æ³•ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚")]),t._v(" "),n("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•é»˜è®¤è¿”å› "),n("code",[t._v("true")]),t._v("ï¼Œè¡¨ç¤ºéœ€è¦é‡æ–°æ¸²æŸ“ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ åº”è¯¥ä¾èµ–äºé»˜è®¤è¡Œä¸ºã€‚å¦‚æœåœ¨ State æ”¹å˜çš„æ—¶å€™ä¸ºäº†é¿å…ç»†å¾®çš„ Bugï¼Œæˆ–æ˜¯å¦‚æœæ€»æ˜¯æŠŠ State å½“åšä¸å¯å˜çš„ï¼Œåœ¨ "),n("code",[t._v("render()")]),t._v(" ä¸­åªä» Props å’Œ State è¯»å–å€¼ï¼Œæ­¤æ—¶ä½ å¯ä»¥è¦†ç›–è¯¥æ–¹æ³•ï¼Œå®ç°æ–°è€ Props å’Œ State çš„æ¯”å¯¹é€»è¾‘ã€‚")]),t._v(" "),n("p",[t._v("å½“è¯¥æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼ "),n("code",[t._v("false")]),t._v(" å‘ŠçŸ¥ React æ— é¡»é‡æ–°æ¸²æŸ“æ—¶ï¼Œ"),n("code",[t._v("render")]),t._v("ã€"),n("code",[t._v("UNSAFE_componentWillUpdate")]),t._v(" å’Œ "),n("code",[t._v("componentDidUpdate")]),t._v(" ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°éƒ½ä¸ä¼šè¢«è§¦å‘ã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ "),n("strong",[t._v("ä½¿ç”¨å»ºè®®")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å¦‚æœæ€§èƒ½æ˜¯ä¸ªç“¶é¢ˆï¼Œå°¤å…¶æ˜¯æœ‰å‡ åä¸ªç”šè‡³ä¸Šç™¾ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨ "),n("code",[t._v("shouldComponentUpdate")]),t._v(" å¯ä»¥ä¼˜åŒ–æ¸²æŸ“æ•ˆç‡ï¼Œæå‡åº”ç”¨çš„æ€§èƒ½ï¼›")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ "),n("code",[t._v("React.PureComponent")]),t._v(" ç»„ä»¶åŸºç±»èƒ½è‡ªåŠ¨å®ç°ä¸€ä¸ª "),n("code",[t._v("shouldComponentUpdate")]),t._v(" ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå¯ä»¥é»˜è®¤ä¸ºç»„ä»¶æ›´æ–°æ ¡éªŒï¼Œä½†æ˜¯åªä¼šå¯¹æ›´æ–°æ•°æ®è¿›è¡Œæµ…å±‚å¯¹ç…§ï¼›")]),t._v(" "),n("li",[t._v("åœ¨å¯¹ "),n("code",[t._v("this.props")]),t._v(" å’Œ "),n("code",[t._v("nextProps")]),t._v(" ä»¥åŠ "),n("code",[t._v("this.state")]),t._v(" å’Œ "),n("code",[t._v("nextState")]),t._v(" è¿›è¡Œæ¯”è¾ƒæ—¶éœ€è¦æ³¨æ„å¼•ç”¨ç±»å‹çš„å‘ï¼›")]),t._v(" "),n("li",[t._v("é€šå¸¸ç”¨äºæ¡ä»¶æ¸²æŸ“ï¼Œä¼˜åŒ–æ¸²æŸ“çš„æ€§èƒ½ã€‚")])]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æ­¤é’©å­å‡½æ•°åœ¨åˆå§‹åŒ–æ¸²æŸ“å’Œä½¿ç”¨äº† "),n("code",[t._v("forceUpdate")]),t._v(" æ–¹æ³•çš„æƒ…å†µä¸‹ä¸ä¼šè¢«è§¦å‘ï¼Œä½¿ç”¨ "),n("code",[t._v("forceUpdate")]),t._v(" ä¼šå¼ºåˆ¶æ›´æ–°")])]),t._v(" "),n("li",[n("p",[t._v("è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä½¿ç”¨ "),n("code",[t._v("setState")]),t._v(" æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¾ªç¯è°ƒç”¨ã€‚")])])]),t._v(" "),n("h3",{attrs:{id:"unsafe-componentwillupdate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#unsafe-componentwillupdate","aria-hidden":"true"}},[t._v("#")]),t._v(" UNSAFE_componentWillUpdate")]),t._v(" "),n("blockquote",[n("p",[t._v("ğŸ—‘ æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°†åœ¨ React v17 æ­£å¼åºŸå¼ƒã€‚")])]),t._v(" "),n("p",[n("strong",[t._v("é¢„æ›´æ–°å‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("UNSAFE_componentWillUpdate(nextProps, nextState)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªæ›´æ–°ç”Ÿå‘½å‘¨æœŸä¸­é‡æ–°æ¸²æŸ“æ‰§è¡Œä¹‹å‰çš„æœ€åä¸€ä¸ªæ–¹æ³•ã€‚ä½ å·²ç»æ‹¥æœ‰äº†ä¸‹ä¸€ä¸ªå±æ€§å’ŒçŠ¶æ€ï¼Œä»–ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä»»ç”±ä½ å¤„ç½®ã€‚ä½ å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ–¹æ³•åœ¨æ¸²æŸ“ä¹‹å‰è¿›è¡Œæœ€åçš„å‡†å¤‡ã€‚")]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šæ ¹æ® State çš„ å˜åŒ–è®¾ç½®å˜é‡ï¼›æ´¾å‘äº‹ä»¶ï¼›å¼€å§‹åŠ¨ç”»ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ­¤é’©å­å‡½æ•°åœ¨åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™ä¸ä¼šè¢«è§¦å‘ï¼›")]),t._v(" "),n("li",[t._v("è¯·å‹¿åœ¨æ­¤å‡½æ•°ä¸­ä½¿ç”¨ "),n("code",[t._v("setState")]),t._v(" æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¾ªç¯è°ƒç”¨ã€‚å¦‚æœéœ€è¦åŸºäºæ–°çš„ Props è®¡ç®— Stateï¼Œå»ºè®®ä½¿ç”¨ "),n("code",[t._v("componentWillRreceiveProps")]),t._v("ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"render-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#render-2","aria-hidden":"true"}},[t._v("#")]),t._v(" render")]),t._v(" "),n("p",[t._v("æ¸²æŸ“å‡½æ•°ã€‚ä¸ä¸Šæ–‡æ‰€æåŠçš„ "),n("code",[t._v("render")]),t._v(" ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸€è‡´ï¼Œç”¨äºè¾“å‡º JSX å¹¶ç»è¿‡ React å¤„ç†åæ¸²æŸ“è‡³æµè§ˆå™¨ã€‚")]),t._v(" "),n("h3",{attrs:{id:"getsnapshotbeforeupdate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate","aria-hidden":"true"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate")]),t._v(" "),n("p",[n("strong",[t._v("ä¿å­˜çŠ¶æ€å¿«ç…§ã€‚")])]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("getSnapshotBeforeUpdate(prevProps, prevState)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨ç»„ä»¶å³å°†æŒ‚è½½æ—¶è§¦å‘ï¼Œå®ƒçš„è§¦å‘åœ¨ "),n("code",[t._v("render")]),t._v(" æ¸²æŸ“å‡½æ•°ä¹‹åã€‚ç”±æ­¤å¯è§ï¼Œ"),n("code",[t._v("render")]),t._v(" å‡½æ•°å¹¶æ²¡æœ‰å®ŒæˆæŒ‚è½½æ“ä½œï¼Œè€Œæ˜¯è¿›è¡Œæ„å»ºæŠ½è±¡ UIï¼ˆä¹Ÿå°±æ˜¯ Virtual DOMï¼‰çš„å·¥ä½œã€‚è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ‰§è¡Œå®Œæ¯•åå°±ä¼šç«‹å³è§¦å‘ "),n("code",[t._v("componentDidUpdate")]),t._v(" ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚")]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°èƒ½è®©ä½ æ•è·æŸäº›ä» DOM ä¸­æ‰èƒ½è·å–çš„ï¼ˆå¯èƒ½ä¼šå˜æ›´çš„ï¼‰ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå…ƒç´ é‡æ–°æ¸²æŸ“åé¡µé¢å„ç§å®šä½ä½ç½®çš„å˜æ›´ç­‰ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("ä½œç”¨ï¼šæ¯”å¦‚ç½‘é¡µæ»šåŠ¨ä½ç½®ï¼Œä¸éœ€è¦å®ƒæŒä¹…åŒ–ï¼Œåªéœ€è¦åœ¨ç»„ä»¶æ›´æ–°ä»¥åèƒ½å¤Ÿæ¢å¤åŸæ¥çš„ä½ç½®å³å¯ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°è¿”å›çš„å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ "),n("code",[t._v("componentDidUpdate")]),t._v("ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªé€šé“ä¿å­˜ä¸€äº›ä¸éœ€è¦æŒä¹…åŒ–çš„çŠ¶æ€ï¼Œç”¨å®Œå³å¯èˆå¼ƒã€‚ï¼ˆè¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸æ˜¯ç»å¸¸éœ€è¦çš„ï¼Œä½†å¯ä»¥ç”¨äºåœ¨æ¢å¤æœŸé—´æ‰‹åŠ¨ä¿å­˜æ»šåŠ¨ä½ç½®çš„æƒ…å†µã€‚ï¼‰")]),t._v(" "),n("li",[t._v("è¯¥å‡½æ•°çš„å‡ºç°æ˜¯ä¸ºäº† React 17 çš„å¼‚æ­¥æ¸²æŸ“è€Œå‡†å¤‡çš„")])]),t._v(" "),n("p",[t._v("âš ï¸ ä¸ "),n("code",[t._v("componentDidUpdate")]),t._v(" ä¸€èµ·ï¼Œè¿™ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸå°†è¦†ç›–æ—§ç‰ˆ "),n("code",[t._v("componentWillUpdate")]),t._v(" çš„æ‰€æœ‰ç”¨ä¾‹ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSnapshotBeforeUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#enter getSnapshotBeforeUpdate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" snapshot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#enter componentDidUpdate snapshot = '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" snapshot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"componentdidupdate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate","aria-hidden":"true"}},[t._v("#")]),t._v(" componentDidUpdate")]),t._v(" "),n("p",[n("strong",[t._v("æ›´æ–°å®Œæˆå‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("componentDidUpdate(nextProps, nextState, snapshot)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“åè§¦å‘ï¼Œç›¸å½“äºé¦–æ¬¡æ¸²æŸ“ï¼ˆåˆå§‹åŒ–ï¼‰ä¹‹åè§¦å‘ "),n("code",[t._v("componentDidMount")]),t._v(" ï¼Œ")]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šæ“ä½œ DOMï¼›å‘é€ç½‘ç»œè¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å°†åŸå…ˆå†™åœ¨ componentWilUpdate ä¸­çš„å›è°ƒè¿ç§»è‡³ componentDidUpdateï¼Œå°†ä»¥å‰æ”¾åœ¨ componentWillReceiveProps ä¸­çš„å¼‚æ­¥ç½‘ç»œè¯·æ±‚æ”¾åœ¨ componentDidUpdate ä¸­ã€‚")]),t._v(" "),n("li",[t._v("åœ¨è¯¥ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ "),n("code",[t._v("setState")]),t._v(" æ—¶ï¼Œå¿…é¡»åŠ  if æ¡ä»¶åˆ¤æ–­ï¼Œé€šè¿‡åˆ¤æ–­ prevPropsã€prevState å’Œ this.state ä¹‹é—´çš„æ•°æ®å˜åŒ–ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œç›¸å…³çš„ State å˜æ›´é€»è¾‘ï¼Œè¿™ä½¿å¾—å°½ç®¡åœ¨ componentDidUpdate ä¸­è°ƒç”¨äº† setState è¿›è¡Œå†æ›´æ–°ï¼Œä½†æ˜¯ç›´è‡³æ¡ä»¶ä¸æˆç«‹ï¼Œå°±ä¸ä¼šé€ æˆç¨‹åºæ­»å¾ªç¯ã€‚")]),t._v(" "),n("li",[t._v("æ­¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¼šåœ¨åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™è§¦å‘ã€‚")])]),t._v(" "),n("p",[t._v("ç›¸æ¯”è£…è½½é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ›´æ–°é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä½¿ç”¨çš„ç›¸å¯¹æ¥è¯´è¦å°‘ä¸€äº›ã€‚å¸¸ç”¨çš„æ˜¯ "),n("code",[t._v("getDerivedStateFromProps")]),t._v("ã€"),n("code",[t._v("shouldComponentUpdate")]),t._v("ï¼Œå‰è€…ç»å¸¸ç”¨äºæ ¹æ®æ–° Props çš„æ•°æ®å»è®¾ç½®ç»„ä»¶çš„ Stateï¼Œè€Œåè€…åˆ™æ˜¯å¸¸ç”¨äºä¼˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" prevProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"å¸è½½é˜¶æ®µ-unmounting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¸è½½é˜¶æ®µ-unmounting","aria-hidden":"true"}},[t._v("#")]),t._v(" å¸è½½é˜¶æ®µ Unmounting")]),t._v(" "),n("h3",{attrs:{id:"componentwillunmount"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount","aria-hidden":"true"}},[t._v("#")]),t._v(" componentWillUnmount")]),t._v(" "),n("p",[n("strong",[t._v("é¢„å¸è½½å‡½æ•°")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šåœ¨ç»„ä»¶å¸è½½å’Œé”€æ¯ä¹‹å‰è§¦å‘ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•å»"),n("strong",[t._v("æ‰§è¡Œä»»ä½•æ¸…ç†ä»»åŠ¡")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸ‰ "),n("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šç”¨äºæ³¨é”€äº‹ä»¶ç›‘å¬å™¨ï¼›å–æ¶ˆç½‘ç»œè¯·æ±‚ï¼›å–æ¶ˆå®šæ—¶å™¨ï¼›è§£ç»‘ DOM äº‹ä»¶ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼šåœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨ "),n("code",[t._v("setState")]),t._v(" ä¸ä¼šè§¦å‘ "),n("code",[t._v("render")]),t._v("ï¼Œå› ä¸ºæ‰€æœ‰çš„æ›´æ–°é˜Ÿåˆ—ï¼Œæ›´æ–°çŠ¶æ€éƒ½è¢«é‡ç½®ä¸º "),n("code",[t._v("null")]),t._v("ã€‚")]),t._v(" "),n("h2",{attrs:{id:"æ•æ‰é”™è¯¯-error-handling"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ•æ‰é”™è¯¯-error-handling","aria-hidden":"true"}},[t._v("#")]),t._v(" æ•æ‰é”™è¯¯ Error Handling")]),t._v(" "),n("p",[t._v("åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶ä¼šè¢«è§¦å‘ã€‚")]),t._v(" "),n("h3",{attrs:{id:"static-getderivedstatefromerror"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#static-getderivedstatefromerror","aria-hidden":"true"}},[t._v("#")]),t._v(" static getDerivedStateFromError")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("static getDervedStateFromError(error)")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨å­å­™ç»„ä»¶æŠ›å‡ºé”™è¯¯æ—¶æ‰§è¡Œã€‚")]),t._v(" "),n("p",[t._v("ğŸ”™ "),n("strong",[t._v("è¿”å›å€¼")]),t._v("ï¼šå®ƒæ¥æ”¶æŠ›å‡ºçš„é”™è¯¯ä½œä¸ºå‚æ•°å¹¶ä¸”éœ€è¦è¿”å›å€¼ç”¨äºæ›´æ–° Stateã€‚")]),t._v(" "),n("p",[t._v("ğŸ’¡ "),n("strong",[t._v("ä½¿ç”¨å»ºè®®")]),t._v("ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å¯ç”¨äºä¿®æ”¹ State ä»¥æ˜¾ç¤ºé”™è¯¯æé†’çš„ UIï¼Œæˆ–è€…å°†é”™è¯¯ä¿¡æ¯å‘é€åˆ°æœåŠ¡ç«¯è¿›è¡Œ Log ç”¨äºåæœŸåˆ†æï¼›")]),t._v(" "),n("li",[t._v("åœ¨æ•è·åˆ°é”™è¯¯çš„ç¬é—´ï¼ŒReact ä¼šåœ¨è¿™æ¬¡æ¸²æŸ“å‘¨æœŸä¸­å°†è¿™ä¸ªç»„ä»¶æ¸²æŸ“ä¸º "),n("code",[t._v("null")]),t._v("ï¼Œè¿™å°±æœ‰å¯èƒ½å¯¼è‡´ä»–çš„çˆ¶ç»„ä»¶è®¾ç½®ä»–ä¸Šé¢çš„ "),n("code",[t._v("ref")]),t._v(" è·å¾— "),n("code",[t._v("null")]),t._v(" è€Œå¯¼è‡´ä¸€äº›é—®é¢˜ï¼›")])]),t._v(" "),n("p",[t._v("è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ "),n("code",[t._v("getDerivedStateFromProps")]),t._v(" ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ä»–åªæœ‰åœ¨å‡ºç°é”™è¯¯çš„æ—¶å€™æ‰è§¦å‘ï¼Œä»–ç›¸å¯¹äº "),n("code",[t._v("componentDidCatch")]),t._v(" çš„ä¼˜åŠ¿æ˜¯åœ¨å½“å‰çš„æ¸²æŸ“å‘¨æœŸä¸­å°±å¯ä»¥ä¿®æ”¹ Stateï¼Œä»¥åœ¨å½“å‰æ¸²æŸ“å°±å¯ä»¥å‡ºç°é”™è¯¯çš„ UIï¼Œè€Œä¸éœ€è¦ä¸€ä¸ª "),n("code",[t._v("null")]),t._v(" çš„ä¸­é—´æ€ã€‚")]),t._v(" "),n("p",[t._v("è€Œè¿™ä¸ªæ–¹æ³•çš„å‡ºç°ï¼Œä¹Ÿæ„å‘³ç€ä»¥åå‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œä¿®æ”¹ State åº”è¯¥æ”¾åœ¨è¿™é‡Œå»åšï¼Œè€Œåç»­æ”¶é›†é”™è¯¯ä¿¡æ¯ä¹‹ç±»çš„æ”¾åˆ° "),n("code",[t._v("componentDidCatch")]),t._v(" é‡Œé¢ã€‚")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorBoundary")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hasError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDerivedStatteFromError")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Update state so the next render will show the fallback UI")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hasError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasErro"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// You can render any custom fallback UI")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Something went wwrong")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"componentdidcatch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#componentdidcatch","aria-hidden":"true"}},[t._v("#")]),t._v(" componentDidCatch")]),t._v(" "),n("p",[t._v("ğŸ“œ "),n("strong",[t._v("è¯­æ³•")]),t._v("ï¼š"),n("code",[t._v("componentDidCatch(error, info)")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("error")]),t._v(" - æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡")]),t._v(" "),n("li",[n("code",[t._v("info")]),t._v(" - åŒ…å«æœ‰å…³é”™è¯¯çš„ä¿¡æ¯çš„å¯¹è±¡")])]),t._v(" "),n("p",[t._v("â± "),n("strong",[t._v("è§¦å‘æ—¶æœº")]),t._v("ï¼šè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåœ¨å­å­™ç»„ä»¶æŠ›å‡ºé”™è¯¯æ—¶è§¦å‘ã€‚")]),t._v(" "),n("p",[t._v("âš ï¸ "),n("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼šé”™è¯¯è¾¹ç•Œåªèƒ½æ•æ‰ç”Ÿå‘½å‘¨æœŸä¸­çš„é”™è¯¯ï¼ˆ"),n("code",[t._v("componentWillMount")]),t._v(" / "),n("code",[t._v("render")]),t._v(" ç­‰æ–¹æ³•åœ¨å†…ï¼‰ã€‚æ— æ³•æ•æ‰å¼‚æ­¥ã€äº‹ä»¶å›è°ƒä¸­çš„é”™è¯¯ï¼Œè¦æ•æ‰å’Œè¦†ç›–æ‰€æœ‰åœºæ™¯ä¾ç„¶éœ€è¦é…åˆ "),n("code",[t._v("window.onerror")]),t._v("ã€"),n("code",[t._v("Promise.catch")]),t._v("ã€"),n("code",[t._v("try/catch")]),t._v(" ç­‰æ–¹å¼ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("é”™è¯¯è¾¹ç•Œï¼ˆError Boundaryï¼‰")]),t._v(" æ˜¯ React ç»„ä»¶ï¼Œå¹¶ä¸æ˜¯æŸåçš„ç»„ä»¶æ ‘ã€‚é”™è¯¯è¾¹ç•Œæ•æ‰å‘ç”Ÿåœ¨å­ç»„ä»¶æ ‘ä¸­ä»»æ„åœ°æ–¹çš„ JavaScript é”™è¯¯ï¼Œæ‰“å°é”™è¯¯æ—¥å¿—ï¼Œå¹¶ä¸”æ˜¾ç¤ºå›é€€çš„ç”¨æˆ·ç•Œé¢ã€‚é”™è¯¯è¾¹ç•Œæ•æ‰æ¸²æŸ“æœŸé—´ã€åœ¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­å’Œåœ¨å®ƒä»¬ä¹‹ä¸‹æ•´æ£µæ ‘çš„æ„é€ å‡½æ•°ä¸­çš„é”™è¯¯ã€‚")]),t._v(" "),n("p",[t._v("å¯ä»¥å®šåˆ¶ä¸€ä¸ªåªæœ‰ "),n("code",[t._v("componentDidCatch")]),t._v(" ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ "),n("code",[t._v("ErrorBoundary")]),t._v(" ç»„ä»¶ã€‚å½“æ•è·é”™è¯¯ï¼Œåˆ™æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œå¦‚æœæ²¡æœ‰æ•è·åˆ°é”™è¯¯ï¼Œåˆ™æ˜¾ç¤ºå­ç»„ä»¶ã€‚")]),t._v(" "),n("p",[t._v("å°†éœ€è¦æ•è·é”™è¯¯çš„ç»„ä»¶ä½œä¸º "),n("code",[t._v("ErrorBoundary")]),t._v(" çš„å­ç»„ä»¶æ¸²æŸ“ï¼Œä¸€æ—¦å­ç»„ä»¶æŠ›å‡ºé”™è¯¯ï¼Œæ•´ä¸ªåº”ç”¨ä¾ç„¶ä¸ä¼šå´©æºƒï¼Œè€Œæ˜¯è¢« "),n("code",[t._v("ErrorBoundary")]),t._v(" æ•è·ã€‚")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorBoundary")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hasError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Something went wrong.")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidCatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hasError"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" ErrorBoundary"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ErrorBoundary "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./ErrorBoundary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MyWidget "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./MyWidget'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("App")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorBoundary")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyWidget")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorBoundary")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("hr"),t._v(" "),n("p",[n("strong",[t._v("å‚è€ƒèµ„æ–™ï¼š")])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://web.jobbole.com/94406/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ React v16.3 å³å°†æ›´æ”¹çš„ç”Ÿå‘½å‘¨æœŸ"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5ae6cd96f265da0b9c106931",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ React v16.3 ç‰ˆæœ¬æ–°ç”Ÿå‘½å‘¨æœŸå‡½æ•°æµ…æåŠå‡çº§æ–¹æ¡ˆ"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5b9b55695188255c5f53d9b8",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ èŠèŠ React v16.3 çš„ UNSAFE ç±»ç”Ÿå‘½å‘¨æœŸ"),n("OutboundLink")],1)])])])},[],!1,null,null,null);s.default=e.exports}}]);