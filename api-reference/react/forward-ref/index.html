<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/react-guidebook/umi.css" />
    <script>
      window.routerBase = "/react-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.19
    </script>
    <title>React.forwardRef</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/react-guidebook-favicon.png&#x27;)" href="/react-guidebook//">React Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/react-guidebook//foundation">åŸºç¡€</a><a href="/react-guidebook//architect">æ¶æ„</a><a href="/react-guidebook//ecosystem">ç”Ÿæ€</a><a aria-current="page" class="active" href="/react-guidebook//api-reference">API</a><a href="/react-guidebook//hooks">Hooks</a><a href="/react-guidebook//extensions">æ‰©å±•</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/react-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/react-guidebook-favicon.png&#x27;)" href="/react-guidebook//"></a><h1>React Guidebook</h1><p>React å®Œå…¨çŸ¥è¯†ä½“ç³»</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/react-guidebook//foundation">åŸºç¡€</a></li><li><a href="/react-guidebook//architect">æ¶æ„</a></li><li><a href="/react-guidebook//ecosystem">ç”Ÿæ€</a></li><li><a aria-current="page" class="active" href="/react-guidebook//api-reference">API</a></li><li><a href="/react-guidebook//hooks">Hooks</a></li><li><a href="/react-guidebook//extensions">æ‰©å±•</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/react-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/react-guidebook//api-reference/react">React</a><ul><li><a href="/react-guidebook//api-reference/react/pure-component"><span>React.PureComponent</span></a></li><li><a href="/react-guidebook//api-reference/react/memo"><span>React.memo</span></a></li><li><a href="/react-guidebook//api-reference/react/create-element"><span>React.createElement</span></a></li><li><a href="/react-guidebook//api-reference/react/clone-element"><span>React.cloneElement</span></a></li><li><a href="/react-guidebook//api-reference/react/is-valid-element"><span>React.isValidElement</span></a></li><li><a href="/react-guidebook//api-reference/react/children"><span>React.children</span></a></li><li><a href="/react-guidebook//api-reference/react/fragment"><span>React.Fragment</span></a></li><li><a href="/react-guidebook//api-reference/react/create-ref"><span>React.createRef</span></a></li><li><a aria-current="page" class="active" href="/react-guidebook//api-reference/react/forward-ref"><span>React.forwardRef</span></a></li><li><a href="/react-guidebook//api-reference/react/lazy"><span>React.lazy</span></a></li><li><a href="/react-guidebook//api-reference/react/suspense"><span>React.Suspense</span></a></li><li><a href="/react-guidebook//api-reference/react/force-update"><span>component.forceUpdate</span></a></li></ul></li><li><a href="/react-guidebook//api-reference/react-dom">ReactDOM</a><ul><li><a href="/react-guidebook//api-reference/react-dom/render"><span>ReactDOM.render</span></a></li><li><a href="/react-guidebook//api-reference/react-dom/hydrate"><span>ReactDOM.hydrate</span></a></li><li><a href="/react-guidebook//api-reference/react-dom/unmount-component-at-node"><span>ReactDOM.componentAtNode</span></a></li><li><a href="/react-guidebook//api-reference/react-dom/find-dom-node"><span>ReactDOM.findDOMNode</span></a></li><li><a href="/react-guidebook//api-reference/react-dom/create-portal"><span>ReactDOM.createPortal</span></a></li></ul></li><li><a href="/react-guidebook//api-reference/react-dom-server">ReactDOMServer</a><ul><li><a href="/react-guidebook//api-reference/react-dom-server/render-to-string"><span>ReactDOMServer.renderToString</span></a></li><li><a href="/react-guidebook//api-reference/react-dom-server/render-to-static-markup"><span>ReactDOMServer.renderToStaticMarkup</span></a></li><li><a href="/react-guidebook//api-reference/react-dom-server/render-to-node-stream"><span>ReactDOMServer.renderToNodeStream</span></a></li><li><a href="/react-guidebook//api-reference/react-dom-server/render-to-static-node-stream"><span>ReactDOMServer.renderToStaticNodeStream</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="é€‚ç”¨åœºæ™¯" data-depth="2" class=""><a href="/react-guidebook//api-reference/react/forward-ref#é€‚ç”¨åœºæ™¯"><span>é€‚ç”¨åœºæ™¯</span></a></li><li title="ä½¿ç”¨æ–¹æ³•" data-depth="2" class=""><a href="/react-guidebook//api-reference/react/forward-ref#ä½¿ç”¨æ–¹æ³•"><span>ä½¿ç”¨æ–¹æ³•</span></a></li><li title="ä½¿ç”¨è¯´æ˜" data-depth="2" class=""><a href="/react-guidebook//api-reference/react/forward-ref#ä½¿ç”¨è¯´æ˜"><span>ä½¿ç”¨è¯´æ˜</span></a></li><li title="é«˜é¢‘ç”¨æ³•" data-depth="2" class=""><a href="/react-guidebook//api-reference/react/forward-ref#é«˜é¢‘ç”¨æ³•"><span>é«˜é¢‘ç”¨æ³•</span></a></li><li title="æºç è§£è¯»" data-depth="2" class=""><a href="/react-guidebook//api-reference/react/forward-ref#æºç è§£è¯»"><span>æºç è§£è¯»</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="reactforwardref"><a aria-hidden="true" href="#reactforwardref"><span class="icon icon-link"></span></a>React.forwardRef</h1><blockquote><p>âœ¨ é€‚ç”¨äº React v16.3+</p></blockquote><p><code>React.forwardRef</code> ç”¨äºå°†çˆ¶ç»„ä»¶åˆ›å»ºçš„ <code>ref</code> å¼•ç”¨å…³è”åˆ°å­ç»„ä»¶ä¸­çš„ä»»æ„å…ƒç´ ä¸Šã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºå­ç»„ä»¶å‘çˆ¶ç»„ä»¶æš´éœ² DOM å¼•ç”¨ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå› ä¸º <code>ref</code> æ˜¯ä¸ºäº†è·å–æŸä¸ªèŠ‚ç‚¹çš„å®ä¾‹ï¼Œä½†æ˜¯å‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰å®ä¾‹çš„ï¼Œä¸å­˜åœ¨ <code>this</code> çš„ï¼Œè¿™ç§æ—¶å€™æ˜¯æ‹¿ä¸åˆ°å‡½æ•°å¼ç»„ä»¶çš„ <code>ref</code> çš„ï¼Œè€Œ <code>React.forwardRef</code> ä¹Ÿèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="é€‚ç”¨åœºæ™¯"><a aria-hidden="true" href="#é€‚ç”¨åœºæ™¯"><span class="icon icon-link"></span></a>é€‚ç”¨åœºæ™¯</h2><ul><li>è·å–æ·±å±‚æ¬¡å­å­™ç»„ä»¶çš„ DOM å…ƒç´ </li><li>è·å–ç›´æ¥ ref å¼•ç”¨çš„å­ç»„ä»¶ä¸ºé class å£°æ˜çš„å‡½æ•°å¼ç»„ä»¶</li><li>ä¼ é€’ <code>Refs</code> åˆ°é«˜é˜¶ç»„ä»¶</li></ul><p>âš ï¸ æ³¨æ„ä¸ <code>React.createRef</code> çš„å¯¹æ¯”</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a aria-hidden="true" href="#ä½¿ç”¨æ–¹æ³•"><span class="icon icon-link"></span></a>ä½¿ç”¨æ–¹æ³•</h2><p><code>React.forwardRef</code> æ¥å— <strong>æ¸²æŸ“å‡½æ•°</strong> ä½œä¸ºå‚æ•°ã€‚React å°†ä½¿ç”¨ <code>props</code> å’Œ <code>ref</code> ä½œä¸ºå‚æ•°æ¥è°ƒç”¨æ­¤å‡½æ•°ã€‚æ­¤å‡½æ•°åº”è¿”å› React èŠ‚ç‚¹ã€‚</p><p>ğŸŒ° <strong>ç¤ºä¾‹ï¼š</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const FancyButton = React.forwardRef((props, ref) =&gt; (
  &lt;button ref={ref} className=&quot;FancyButton&quot;&gt;
    {props.children}
  &lt;/button&gt;
));

// ç°åœ¨ä½ å¯ä»¥ç›´æ¥è·å– DOM æŒ‰é’®çš„ ref äº†
const ref = React.createRef();

export default &lt;FancyButton ref={ref}&gt;Click me!&lt;/FancyButton&gt;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> FancyButton </span><span class="token operator">=</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter punctuation">,</span><span class="token parameter"> ref</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">button</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">ref</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag attr-name">className</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">FancyButton</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain">props</span><span class="token punctuation">.</span><span class="token plain">children</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;/</span><span class="token tag">button</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// ç°åœ¨ä½ å¯ä»¥ç›´æ¥è·å– DOM æŒ‰é’®çš„ ref äº†</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> ref </span><span class="token operator">=</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">FancyButton</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">ref</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain">Click me</span><span class="token operator">!</span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">FancyButton</span><span class="token tag punctuation">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>å®ç°è¿‡ç¨‹ï¼š</strong></p><ol><li>é€šè¿‡ <code>React.createRef()</code> åˆ›å»º <code>ref</code> å˜é‡ï¼Œç„¶ååœ¨ å­ç»„ä»¶ï¼ˆ<code>FancyButton</code>ï¼‰å±æ€§ä¸­é€šè¿‡ <code>ref=<!-- -->{<!-- -->ref<!-- -->}</code> çš„æ–¹å¼æŠŠè¿™ä¸ª <code>ref</code> å’Œç»„ä»¶å…³è”èµ·æ¥ã€‚</li><li>ç›®å‰ä¸ºæ­¢ï¼Œå¦‚æœå­ç»„ä»¶ï¼ˆ<code>FancyButton</code>ï¼‰æ˜¯ä¸€ä¸ªé€šè¿‡ Class æˆ–è€…å‡½æ•°å£°æ˜çš„ç»„ä»¶ï¼Œé‚£ä¹ˆå°±åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ <code>ref</code> å˜é‡çš„ <code>current</code> å±æ€§æŒæœ‰å¯¹å­ç»„ä»¶ï¼ˆ<code>FancyButton</code>ï¼‰å®ä¾‹çš„å¼•ç”¨ã€‚</li><li>ä½†æ˜¯ï¼Œå­ç»„ä»¶ï¼ˆ<code>FancyButton</code>ï¼‰ç»è¿‡äº† <code>React.fowardRef()</code> çš„å¤„ç†ï¼Œè¿™ä¸ª API æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ <code>ref</code>ï¼Œç„¶åæŠŠ <code>ref</code> ç»‘å®šåœ¨ DOM å…ƒç´ ä¸Šï¼ˆbuttonï¼‰ï¼Œè¿™æ · <code>ref.current</code> çš„å¼•ç”¨å°±æ˜¯ DOM å…ƒç´ ï¼ˆbuttonï¼‰ã€‚</li></ol><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li>åªåœ¨ä½¿ç”¨ <code>React.forwardRef</code> å®šä¹‰ç»„ä»¶æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•° <code>ref</code> æ‰å­˜åœ¨</li><li>åœ¨é¡¹ç›®ä¸­ç»„ä»¶åº“ä¸­å°½é‡ä¸è¦ä½¿ç”¨ <code>React.forwardRef</code>ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¯¼è‡´å­ç»„ä»¶è¢«ç ´åæ€§æ›´æ”¹</li><li>å‡½æ•°ç»„ä»¶å’Œ class ç»„ä»¶å‡ä¸æ¥æ”¶ <code>ref</code> å‚æ•°ï¼Œå³ <code>props</code> ä¸­ä¸å­˜åœ¨ <code>ref</code>ï¼Œ<code>ref</code> å¿…é¡»ç‹¬ç«‹ <code>props</code> å‡ºæ¥ï¼Œå¦åˆ™ä¼šè¢« React ç‰¹æ®Šå¤„ç†æ‰</li></ul><h2 id="ä½¿ç”¨è¯´æ˜"><a aria-hidden="true" href="#ä½¿ç”¨è¯´æ˜"><span class="icon icon-link"></span></a>ä½¿ç”¨è¯´æ˜</h2><p>ForwardRef API å……å½“ä¼ é€’è€…è§’è‰²ï¼Œå®é™…ä¸Šæ˜¯å®¹å™¨ç»„ä»¶ï¼Œèƒ½å¤Ÿè¾…åŠ©ç®€åŒ–åµŒå¥—ç»„ä»¶ã€Component è‡³ Element é—´çš„ <code>ref</code> ä¼ é€’ï¼Œèƒ½æœ‰æ•ˆé¿å… <code>this.ref.ref.ref</code> çš„é—®é¢˜ã€‚å‘å‰ä¼ é€’ï¼Œè¿™å°±æ˜¯å« <code>forwardRef</code> çš„åŸå› ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ <code>forwardRef</code> æ—¶ï¼Œè¯¥ç»„ä»¶å¿…é¡»æ˜¯å‡½æ•°å¼ç»„ä»¶ã€‚åŸå› å¯èƒ½æ˜¯ React ä¸æƒ³ç ´å Class ç»„ä»¶çš„å‚è€ƒä½“ç³»ã€‚</p><blockquote><p>ğŸ– ä¸ä¹‹å‰æåŠçš„è·å–ç»„ä»¶ <code>ref</code> ä¸èƒ½ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶çš„åŒºåˆ«åœ¨å“ªï¼Ÿ</p></blockquote><p>ä¸¤è€…æœ‰ç€æœ¬è´¨åŒºåˆ«ï¼Œè¿™é‡Œè·å–çš„ä¾ç„¶æ˜¯ DOM å…ƒç´ ï¼Œåªä¸è¿‡ <strong>è·¨çº§</strong> äº†ã€‚</p><ul><li><code>React.createRef</code>ï¼šç»‘å®šå­ç»„ä»¶å®¹å™¨ï¼ˆæœ€å¤–å±‚ DOM å…ƒç´ ï¼‰</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import React, { Component } from &#x27;react&#x27;;
import Search from &#x27;./Search&#x27;;

class App extends Component {
  textInput = createRef();

  componentDidMount() {
    this.textInput.current.focus();
  }
  render() {
    return &lt;Search ref={this.textInput} /&gt;;
  }
}

export default App;
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> React</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> Component </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> Search </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;./Search&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">App</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  textInput </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token plain">textInput</span><span class="token punctuation">.</span><span class="token plain">current</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Search</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript keyword">this</span><span class="token tag script language-javascript punctuation">.</span><span class="token tag script language-javascript">textInput</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> App</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ul><li><code>React.forwardRef</code>ï¼šçˆ¶ç»„ä»¶åˆ›å»ºç»‘å®šå­å­™ç»„ä»¶ DOM å…ƒç´ </li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import React, { forwardRef } from &#x27;react&#x27;;

const Search = forwardRef((props, ref) =&gt; &lt;input type=&quot;text&quot; ref={ref} /&gt;);

export default Search;
" data-status="copy"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> forwardRef </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">Search</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter punctuation">,</span><span class="token parameter"> ref</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">input type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token plain"> ref</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">ref</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token maybe-class-name">Search</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>äº‹å®ä¸Šï¼Œä¸€æ—¦è¢« <code>forwardRef</code> åŒ…è£¹çš„å­ç»„ä»¶æ¥æ”¶åˆ°äº† <code>ref</code> å‚æ•°ï¼Œå®ƒå¯ä»¥ç»§ç»­å°† <code>ref</code> å¾€ä¸‹ä¼ é€’ã€‚</p><p>ä¹‹å <code>ref</code> å°±å˜æˆäº†ä¸€ä¸ªæ™®é€šçš„ <code>props</code>ï¼Œç›´åˆ°å®ƒè¢«æŒ‚è½½åˆ°æŸä¸ª DOM å…ƒç´ çš„ <code>ref</code> å±æ€§ä¸Šã€‚</p><p>å…¶å® <code>ref</code> å›è°ƒä¹Ÿæ˜¯å¯ä»¥ <strong>è·¨å¤šçº§</strong> ä¼ é€’çš„ï¼ŒåŸç†åŒä¸Šã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import React, { Component, createRef } from &#x27;react&#x27;;

class Input extends Component {
  render() {
    return &lt;input type=&quot;text&quot; ref={this.props.inputRef} /&gt;;
  }
}

const Search = forwardRef((props, ref) =&gt; &lt;Input inputRef={ref} /&gt;);

class App extends Component {
  textInput = createRef();

  render() {
    return &lt;Search ref={this.textInput} /&gt;;
  }
}

export default App;
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> React</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> Component</span><span class="token punctuation">,</span><span class="token plain"> createRef </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Input</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag">input</span><span class="token tag"> </span><span class="token tag attr-name">type</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">text</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript keyword">this</span><span class="token tag script language-javascript punctuation">.</span><span class="token tag script language-javascript">props</span><span class="token tag script language-javascript punctuation">.</span><span class="token tag script language-javascript">inputRef</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> Search </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter punctuation">,</span><span class="token parameter"> ref</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Input</span><span class="token tag"> </span><span class="token tag attr-name">inputRef</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">ref</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">App</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  textInput </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Search</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript keyword">this</span><span class="token tag script language-javascript punctuation">.</span><span class="token tag script language-javascript">textInput</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> App</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="é«˜é¢‘ç”¨æ³•"><a aria-hidden="true" href="#é«˜é¢‘ç”¨æ³•"><span class="icon icon-link"></span></a>é«˜é¢‘ç”¨æ³•</h2><p>å¸¸åœ¨é«˜é˜¶ç»„ä»¶ä¸­ä½¿ç”¨ <code>React.forwardRef</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function enhance(WrappedComponent) {
  class Enhance extends React.Component {
    render() {
      const { forwardRef, ...restProps } = this.props;
      // å°†å®šä¹‰çš„ prop å±æ€§ forwardRef å®šä¹‰ä¸º ref
      return &lt;WrappedComponent ref={forwardedRef} {...restProps} /&gt;;
    }
  }
  // æ³¨æ„ React.forwardRef å›è°ƒçš„ç¬¬äºŒä¸ªå‚æ•° ref
  // æˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºå¸¸è§„ prop å±æ€§ä¼ é€’ç»™ Enhanceï¼Œä¾‹å¦‚ forwardedRef
  // ç„¶åå®ƒå°±å¯ä»¥è¢«æŒ‚è½½åˆ°è¢« Enhance åŒ…è£¹çš„å­ç»„ä»¶ä¸Š
  return React.forwardRef((props, ref) =&gt; &lt;Enhance {...props} forwardedRef={ref} /&gt;);
}

// å­ç»„ä»¶
class MyComponent extends React.Component {
  render(){
    return (
      &lt;input type=&#x27;text&#x27; /&gt;
    )
  }
}

// EnhancedComponent ä¼šæ¸²æŸ“ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ enhance(MyComponent)
const EnhancedComponent = enhance(MyComponent);

const ref = React.createRef();

// æˆ‘ä»¬å¯¼å…¥çš„ EnahcnedComponent ç»„ä»¶æ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰Enhance
// é€šè¿‡ React.forward å°† ref å°†æŒ‡å‘äº† Enhance å†…éƒ¨çš„ MyComponent ç»„ä»¶
// è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ ref.current.focus() æ–¹æ³•
&lt;EnhancedComponent label=&quot;Click Me&quot; handleClick={handleClick} ref={ref} /&gt;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">enhance</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Enhance</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">React</span><span class="token class-name punctuation">.</span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> forwardRef</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain">restProps </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token plain">props</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// å°†å®šä¹‰çš„ prop å±æ€§ forwardRef å®šä¹‰ä¸º ref</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">WrappedComponent</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">forwardedRef</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag spread punctuation">{</span><span class="token tag spread punctuation">...</span><span class="token tag spread attr-value">restProps</span><span class="token tag spread punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// æ³¨æ„ React.forwardRef å›è°ƒçš„ç¬¬äºŒä¸ªå‚æ•° ref</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// æˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºå¸¸è§„ prop å±æ€§ä¼ é€’ç»™ Enhanceï¼Œä¾‹å¦‚ forwardedRef</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ç„¶åå®ƒå°±å¯ä»¥è¢«æŒ‚è½½åˆ°è¢« Enhance åŒ…è£¹çš„å­ç»„ä»¶ä¸Š</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter punctuation">,</span><span class="token parameter"> ref</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Enhance</span><span class="token tag"> </span><span class="token tag spread punctuation">{</span><span class="token tag spread punctuation">...</span><span class="token tag spread attr-value">props</span><span class="token tag spread punctuation">}</span><span class="token tag"> </span><span class="token tag attr-name">forwardedRef</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">ref</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// å­ç»„ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">MyComponent</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">React</span><span class="token class-name punctuation">.</span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token tag punctuation">&lt;</span><span class="token tag">input</span><span class="token tag"> </span><span class="token tag attr-name">type</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&#x27;</span><span class="token tag attr-value">text</span><span class="token tag attr-value punctuation">&#x27;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// EnhancedComponent ä¼šæ¸²æŸ“ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ enhance(MyComponent)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> EnhancedComponent </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">enhance</span><span class="token punctuation">(</span><span class="token plain">MyComponent</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> ref </span><span class="token operator">=</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// æˆ‘ä»¬å¯¼å…¥çš„ EnahcnedComponent ç»„ä»¶æ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰Enhance</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// é€šè¿‡ React.forward å°† ref å°†æŒ‡å‘äº† Enhance å†…éƒ¨çš„ MyComponent ç»„ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ ref.current.focus() æ–¹æ³•</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">EnhancedComponent</span><span class="token tag"> </span><span class="token tag attr-name">label</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">Click Me</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">handleClick</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">handleClick</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">ref</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="æºç è§£è¯»"><a aria-hidden="true" href="#æºç è§£è¯»"><span class="icon icon-link"></span></a>æºç è§£è¯»</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export default function forwardRef&lt;Props, ElementType: React$ElementType&gt;(
  render: (props: Props, ref: React$Ref&lt;ElementType&gt;) =&gt; React$Node
) {
  if (__DEV__) {
    if (render != null &amp;&amp; render.$typeof === REACT_MEMO_TYPE) {
      warningWithoutStack(
        false,
        &#x27;forwardRef requires a render function but received a `memo` &#x27; +
          &#x27;component. Instead of forwardRef(memo(...)), use &#x27; +
          &#x27;memo(forwardRef(...)).&#x27;
      );
    } else if (typeof render !== &#x27;function&#x27;) {
      warningWithoutStack(
        false,
        &#x27;forwardRef requires a render function but was given %s.&#x27;,
        render === null ? &#x27;null&#x27; : typeof render
      );
    } else {
      warningWithoutStack(
        // Do not warn for 0 arguments because it could be due to usage of the &#x27;arguments&#x27; object
        render.length === 0 || render.length === 2,
        &#x27;forwardRef render functions accept exactly two parameters: props and ref. %s&#x27;,
        render.length === 1
          ? &#x27;Did you forget to use the ref parameter?&#x27;
          : &#x27;Any additional parameter will be undefined.&#x27;
      );
    }

    if (render != null) {
      warningWithoutStack(
        render.defaultProps == null &amp;&amp; render.propTypes == null,
        &#x27;forwardRef render functions do not support propTypes or defaultProps. &#x27; +
          &#x27;Did you accidentally pass a React component?&#x27;
      );
    }
  }

  /**
   * REACT_FORWARD_REF_TYPE å¹¶ä¸æ˜¯ React.forwardRef åˆ›å»ºçš„å®ä¾‹çš„ $typeof
   * React.forwardRef è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ ref æ˜¯é€šè¿‡å®ä¾‹çš„å‚æ•°å½¢å¼ä¼ é€’è¿›å»çš„ï¼Œ
   * å®é™…ä¸Šï¼ŒReact.forwardRef è¿”å›çš„æ˜¯ä¸€ä¸ª ReactElementï¼Œå®ƒçš„ $typeof ä¹Ÿå°±æ˜¯ REACT_ELEMENT_TYPE
   * è€Œ è¿”å›çš„å¯¹è±¡ æ˜¯ä½œä¸º ReactElement çš„ type å­˜åœ¨
   */
  return {
    // è¿”å›ä¸€ä¸ªå¯¹è±¡
    $typeof: REACT_FORWARD_REF_TYPE, // å¹¶ä¸æ˜¯ React.forwardRef åˆ›å»ºçš„å®ä¾‹çš„ $typeof
    render, // å‡½æ•°ç»„ä»¶
  };
}
" data-status="copy"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> forwardRef</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Props</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">ElementType</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">React$ElementType</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">render</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter punctuation">:</span><span class="token parameter"> Props</span><span class="token parameter punctuation">,</span><span class="token parameter"> ref</span><span class="token parameter punctuation">:</span><span class="token parameter"> React$Ref</span><span class="token parameter operator">&lt;</span><span class="token parameter">ElementType</span><span class="token parameter operator">&gt;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">React$Node</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">__DEV__</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">render </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> render</span><span class="token punctuation">.</span><span class="token property-access">$</span><span class="token keyword">typeof</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token constant">REACT_MEMO_TYPE</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">warningWithoutStack</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;forwardRef requires a render function but received a `memo` &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&#x27;component. Instead of forwardRef(memo(...)), use &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&#x27;memo(forwardRef(...)).&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> render </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">warningWithoutStack</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;forwardRef requires a render function but was given %s.&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        render </span><span class="token operator">===</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string">&#x27;null&#x27;</span><span class="token plain"> </span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> render</span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">warningWithoutStack</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// Do not warn for 0 arguments because it could be due to usage of the &#x27;arguments&#x27; object</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        render</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> render</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;forwardRef render functions accept exactly two parameters: props and ref. %s&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        render</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string">&#x27;Did you forget to use the ref parameter?&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Any additional parameter will be undefined.&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">render </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">warningWithoutStack</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        render</span><span class="token punctuation">.</span><span class="token property-access">defaultProps</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> render</span><span class="token punctuation">.</span><span class="token property-access">propTypes</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&#x27;forwardRef render functions do not support propTypes or defaultProps. &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&#x27;Did you accidentally pass a React component?&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token doc-comment comment"> /**</span></div><div class="token-line"><span class="token doc-comment comment">   * REACT_FORWARD_REF_TYPE å¹¶ä¸æ˜¯ React.forwardRef åˆ›å»ºçš„å®ä¾‹çš„ $typeof</span></div><div class="token-line"><span class="token doc-comment comment">   * React.forwardRef è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ ref æ˜¯é€šè¿‡å®ä¾‹çš„å‚æ•°å½¢å¼ä¼ é€’è¿›å»çš„ï¼Œ</span></div><div class="token-line"><span class="token doc-comment comment">   * å®é™…ä¸Šï¼ŒReact.forwardRef è¿”å›çš„æ˜¯ä¸€ä¸ª ReactElementï¼Œå®ƒçš„ $typeof ä¹Ÿå°±æ˜¯ REACT_ELEMENT_TYPE</span></div><div class="token-line"><span class="token doc-comment comment">   * è€Œ è¿”å›çš„å¯¹è±¡ æ˜¯ä½œä¸º ReactElement çš„ type å­˜åœ¨</span></div><div class="token-line"><span class="token doc-comment comment">   */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    $</span><span class="token keyword">typeof</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">REACT_FORWARD_REF_TYPE</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// å¹¶ä¸æ˜¯ React.forwardRef åˆ›å»ºçš„å®ä¾‹çš„ $typeof</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    render</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// å‡½æ•°ç»„ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/React-GuideBook/edit/master/docs/api-reference/react/forward-ref.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/1/2020, 6:20:53 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/react-guidebook/umi.js"></script>
    <script src="/react-guidebook/docs__api-reference__react__forward-ref.md.js"></script>
  </body>
</html>
